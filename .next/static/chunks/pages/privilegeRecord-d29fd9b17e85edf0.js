(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[274],{4886:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privilegeRecord",function(){return t(293)}])},7946:function(e,r,t){"use strict";var a=t(2187),s=t.n(a),l=t(5271),n=t(4982),i=t(2676);let d=l.forwardRef((e,r)=>{let{bsPrefix:t,bg:a="primary",pill:l=!1,text:d,className:c,as:o="span",...u}=e,m=(0,n.vE)(t,"badge");return(0,i.jsx)(o,{ref:r,...u,className:s()(c,m,l&&"rounded-pill",d&&"text-".concat(d),a&&"bg-".concat(a))})});d.displayName="Badge",r.Z=d},8166:function(e,r,t){"use strict";t.d(r,{b:function(){return l}});var a=t(4961),s=t(5139);class l{static async request_url(e,r,t,l){let n=new URLSearchParams(t);return n.append("lang",localStorage.getItem("language")||"en"),n.append("token",localStorage.getItem("token")||""),fetch("/api/"+(r+=(r.includes("?")?"&":"?")+n.toString()),{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},redirect:"manual"}).then(e=>e.json()).then(e=>(e.success?(l.showSuccess&&a.X.emit("newAlert",{message:e.message,variant:"success"}),l.success&&l.success(e.result)):(l.hideFailure||a.X.emit("newAlert",{message:e.message,variant:"danger"}),l.failure&&l.failure(e.result)),e.result)).catch(e=>{l.hideError||a.X.emit("newAlert",{message:(0,s.t)("networkError"),variant:"danger"}),l.error&&l.error(e)})}static async request_body(e,r,t,l){fetch("/api/"+r,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({params:t.params||{},lang:localStorage.getItem("language")||"en",token:localStorage.getItem("token")||""}),redirect:"manual"}).then(e=>e.json()).then(e=>{e.success?(l.showSuccess&&a.X.emit("newAlert",{message:e.message,variant:"success"}),l.success&&l.success(e.result)):(l.hideFailure||a.X.emit("newAlert",{message:e.message,variant:"danger"}),l.failure&&l.failure(e.result))}).catch(e=>{l.hideError||a.X.emit("newAlert",{message:(0,s.t)("networkError"),variant:"danger"}),l.error&&l.error(e)})}static async Get(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.request_url("GET",e,r,t)}static async Post(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.request_body("POST",e,r,t)}static async Put(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.request_body("PUT",e,r,t)}static async Delete(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.request_url("DELETE",e,r,t)}static async SWRGet(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((t,a)=>{l.Get(e,r,{success:e=>t(e),failure:e=>a(e),error:e=>a(e)})})}static success(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.writableEnded||(e.status(200).json({success:!0,message:r,result:t}),e.end())}static failure(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.writableEnded||(e.status(200).json({success:!1,message:r,result:{}}),e.end())}}},293:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return X}});var a=t(2676),s=t(5271),l=t(5324),n=t(7976),i=t.n(n),d=t(2187),c=t.n(d),o=t(4982),u=t(9400);let m=s.forwardRef((e,r)=>{let{active:t=!1,disabled:s=!1,className:l,style:n,activeLabel:i="(current)",children:d,linkStyle:o,linkClassName:m,as:g=u.Z,...v}=e,p=t||s?"span":g;return(0,a.jsx)("li",{ref:r,style:n,className:c()(l,"page-item",{active:t,disabled:s}),children:(0,a.jsxs)(p,{className:c()("page-link",m),style:o,...v,children:[d,t&&i&&(0,a.jsx)("span",{className:"visually-hidden",children:i})]})})});function g(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,l=s.forwardRef((e,s)=>{let{children:l,...n}=e;return(0,a.jsxs)(m,{...n,ref:s,children:[(0,a.jsx)("span",{"aria-hidden":"true",children:l||r}),(0,a.jsx)("span",{className:"visually-hidden",children:t})]})});return l.displayName=e,l}m.displayName="PageItem";let v=g("First","\xab"),p=g("Prev","‹","Previous"),f=g("Ellipsis","…","More"),h=g("Next","›"),j=g("Last","\xbb"),x=s.forwardRef((e,r)=>{let{bsPrefix:t,className:s,size:l,...n}=e,i=(0,o.vE)(t,"pagination");return(0,a.jsx)("ul",{ref:r,...n,className:c()(s,i,l&&"".concat(i,"-").concat(l))})});x.displayName="Pagination";var y=Object.assign(x,{First:v,Prev:p,Ellipsis:f,Item:m,Next:h,Last:j});let N=s.forwardRef((e,r)=>{let{className:t,bsPrefix:s,as:l="div",...n}=e;return s=(0,o.vE)(s,"card-body"),(0,a.jsx)(l,{ref:r,className:c()(t,s),...n})});N.displayName="CardBody";let w=s.forwardRef((e,r)=>{let{className:t,bsPrefix:s,as:l="div",...n}=e;return s=(0,o.vE)(s,"card-footer"),(0,a.jsx)(l,{ref:r,className:c()(t,s),...n})});w.displayName="CardFooter";var b=t(557);let R=s.forwardRef((e,r)=>{let{bsPrefix:t,className:l,as:n="div",...i}=e,d=(0,o.vE)(t,"card-header"),u=(0,s.useMemo)(()=>({cardHeaderBsPrefix:d}),[d]);return(0,a.jsx)(b.Z.Provider,{value:u,children:(0,a.jsx)(n,{ref:r,...i,className:c()(l,d)})})});R.displayName="CardHeader";let E=s.forwardRef((e,r)=>{let{bsPrefix:t,className:s,variant:l,as:n="img",...i}=e,d=(0,o.vE)(t,"card-img");return(0,a.jsx)(n,{ref:r,className:c()(l?"".concat(d,"-").concat(l):d,s),...i})});E.displayName="CardImg";let S=s.forwardRef((e,r)=>{let{className:t,bsPrefix:s,as:l="div",...n}=e;return s=(0,o.vE)(s,"card-img-overlay"),(0,a.jsx)(l,{ref:r,className:c()(t,s),...n})});S.displayName="CardImgOverlay";let k=s.forwardRef((e,r)=>{let{className:t,bsPrefix:s,as:l="a",...n}=e;return s=(0,o.vE)(s,"card-link"),(0,a.jsx)(l,{ref:r,className:c()(t,s),...n})});k.displayName="CardLink";var C=t(5136);let P=(0,C.Z)("h6"),I=s.forwardRef((e,r)=>{let{className:t,bsPrefix:s,as:l=P,...n}=e;return s=(0,o.vE)(s,"card-subtitle"),(0,a.jsx)(l,{ref:r,className:c()(t,s),...n})});I.displayName="CardSubtitle";let _=s.forwardRef((e,r)=>{let{className:t,bsPrefix:s,as:l="p",...n}=e;return s=(0,o.vE)(s,"card-text"),(0,a.jsx)(l,{ref:r,className:c()(t,s),...n})});_.displayName="CardText";let T=(0,C.Z)("h5"),L=s.forwardRef((e,r)=>{let{className:t,bsPrefix:s,as:l=T,...n}=e;return s=(0,o.vE)(s,"card-title"),(0,a.jsx)(l,{ref:r,className:c()(t,s),...n})});L.displayName="CardTitle";let Z=s.forwardRef((e,r)=>{let{bsPrefix:t,className:s,bg:l,text:n,border:i,body:d=!1,children:u,as:m="div",...g}=e,v=(0,o.vE)(t,"card");return(0,a.jsx)(m,{ref:r,...g,className:c()(s,v,l&&"bg-".concat(l),n&&"text-".concat(n),i&&"border-".concat(i)),children:d?(0,a.jsx)(N,{children:u}):u})});Z.displayName="Card";var F=Object.assign(Z,{Img:E,Title:L,Subtitle:I,Body:N,Link:k,Text:_,Header:R,Footer:w,ImgOverlay:S}),A=t(7946),G=t(9505),O=t(8166);function X(){let{t:e}=l.default,[r,t]=(0,s.useState)(1),{data:n}=(0,G.ZP)("privilegeRecord?page="+r,O.b.SWRGet),{data:d}=(0,G.ZP)(()=>n?"student?student="+n.privilegeRecord.map(e=>e.student).join(","):null,O.b.SWRGet),{data:c}=(0,G.ZP)(()=>n?"group?groupIdList="+n.privilegeRecord.filter(e=>"group"==e.type).map(e=>e.value):null,O.b.SWRGet),{data:o}=(0,G.ZP)(()=>n?"role?roleIdList="+n.privilegeRecord.filter(e=>"role"==e.type).map(e=>e.value):null,O.b.SWRGet);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{children:(0,a.jsx)("title",{children:e("privilegeRecord")+" - "+e("brand")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:e("privilegeRecord")}),(0,a.jsxs)(y,{className:"justify-content-center",children:[(0,a.jsx)(y.First,{onClick:()=>t(1)}),(0,a.jsx)(y.Prev,{onClick:()=>t(r-1),disabled:1==r}),(0,a.jsx)(y.Item,{children:r}),(0,a.jsx)(y.Next,{onClick:()=>t(r+1),disabled:null==n||r==Math.ceil(n.privilegeRecordSize/10)}),(0,a.jsx)(y.Last,{onClick:()=>t(Math.ceil(n.privilegeRecordSize/10))})]}),n&&n.privilegeRecord.map(r=>{var t,s,l;return(0,a.jsx)(F,{className:"mb-2",border:r.io?"info":"secondary",children:(0,a.jsxs)(F.Body,{children:[(0,a.jsx)(F.Title,{children:d?null===(t=d.student.find(e=>e.studentId==r.student))||void 0===t?void 0:t.studentName:e("student")+r.student}),(0,a.jsx)(F.Subtitle,{className:"mb-2 text-muted",children:r.date}),(0,a.jsxs)(F.Text,{children:[r.io?e("gain"):e("lose"),e(r.type),e("colon"),"group"==r.type?(0,a.jsx)(A.Z,{role:"button",onClick:()=>{window.location.href="/group?groupIdList="+r.value},children:c?null===(s=c.group.find(e=>e.groupId==r.value))||void 0===s?void 0:s.groupName:e("group")+r.value},r.value):"role"==r.type?(0,a.jsx)(A.Z,{role:"button",onClick:()=>{window.location.href="/role?roleIdList="+r.value},children:o?null===(l=o.role.find(e=>e.roleId==r.value))||void 0===l?void 0:l.roleName:e("role")+r.value},r.value):(0,a.jsxs)(a.Fragment,{children:[r.type," ",r.value]}),e("comma"),e("reason"),e("colon"),r.reason]})]})},r.id)})]})]})}}},function(e){e.O(0,[368,888,774,179],function(){return e(e.s=4886)}),_N_E=e.O()}]);