(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{751:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/permission",function(){return s(5954)}])},5837:function(e,t,s){"use strict";s.d(t,{r:function(){return o}});var r=s(2187),a=s.n(r),n=s(5271),l=s(4982),c=s(2676);function o(e){let{as:t,bsPrefix:s,className:r,...n}=e;s=(0,l.vE)(s,"col");let c=(0,l.pi)(),o=(0,l.zG)(),i=[],d=[];return c.forEach(e=>{let t,r,a;let l=n[e];delete n[e],"object"==typeof l&&null!=l?{span:t,offset:r,order:a}=l:t=l;let c=e!==o?"-".concat(e):"";t&&i.push(!0===t?"".concat(s).concat(c):"".concat(s).concat(c,"-").concat(t)),null!=a&&d.push("order".concat(c,"-").concat(a)),null!=r&&d.push("offset".concat(c,"-").concat(r))}),[{...n,className:a()(r,...i,...d)},{as:t,bsPrefix:s,spans:i}]}let i=n.forwardRef((e,t)=>{let[{className:s,...r},{as:n="div",bsPrefix:l,spans:i}]=o(e);return(0,c.jsx)(n,{...r,ref:t,className:a()(s,!i.length&&l)})});i.displayName="Col",t.Z=i},4018:function(e,t,s){"use strict";var r=s(2187),a=s.n(r),n=s(5271),l=s(6932),c=s(4982),o=s(2676);let i=n.forwardRef((e,t)=>{let{bsPrefix:s,className:r,children:n,controlId:i,label:d,...u}=e;return s=(0,c.vE)(s,"form-floating"),(0,o.jsxs)(l.Z,{ref:t,className:a()(r,s),controlId:i,...u,children:[n,(0,o.jsx)("label",{htmlFor:i,children:d})]})});i.displayName="FloatingLabel",t.Z=i},4703:function(e,t,s){"use strict";s.d(t,{Z:function(){return _}});var r=s(2187),a=s.n(r),n=s(507),l=s.n(n),c=s(5271),o=s(2676);let i={type:l().string,tooltip:l().bool,as:l().elementType},d=c.forwardRef((e,t)=>{let{as:s="div",className:r,type:n="valid",tooltip:l=!1,...c}=e;return(0,o.jsx)(s,{...c,ref:t,className:a()(r,"".concat(n,"-").concat(l?"tooltip":"feedback"))})});d.displayName="Feedback",d.propTypes=i;var u=s(4331),f=s(556),m=s(4982);let h=c.forwardRef((e,t)=>{let{bsPrefix:s,className:r,htmlFor:n,...l}=e,{controlId:i}=(0,c.useContext)(f.Z);return s=(0,m.vE)(s,"form-check-label"),(0,o.jsx)("label",{...l,ref:t,htmlFor:n||i,className:a()(r,s)})});h.displayName="FormCheckLabel";let p=c.forwardRef((e,t)=>{let{id:s,bsPrefix:r,bsSwitchPrefix:n,inline:l=!1,reverse:i=!1,disabled:p=!1,isValid:g=!1,isInvalid:v=!1,feedbackTooltip:x=!1,feedback:j,feedbackType:y,className:b,style:w,title:N="",type:E="checkbox",label:Z,children:k,as:F="input",...C}=e;r=(0,m.vE)(r,"form-check"),n=(0,m.vE)(n,"form-switch");let{controlId:R}=(0,c.useContext)(f.Z),S=(0,c.useMemo)(()=>({controlId:s||R}),[R,s]),_=!k&&null!=Z&&!1!==Z||c.Children.toArray(k).some(e=>c.isValidElement(e)&&e.type===h),I=(0,o.jsx)(u.Z,{...C,type:"switch"===E?"checkbox":E,ref:t,isValid:g,isInvalid:v,disabled:p,as:F});return(0,o.jsx)(f.Z.Provider,{value:S,children:(0,o.jsx)("div",{style:w,className:a()(b,_&&r,l&&"".concat(r,"-inline"),i&&"".concat(r,"-reverse"),"switch"===E&&n),children:k||(0,o.jsxs)(o.Fragment,{children:[I,_&&(0,o.jsx)(h,{title:N,children:Z}),j&&(0,o.jsx)(d,{type:y,tooltip:x,children:j})]})})})});p.displayName="FormCheck";var g=Object.assign(p,{Input:u.Z,Label:h});s(1190);let v=c.forwardRef((e,t)=>{let{bsPrefix:s,type:r,size:n,htmlSize:l,id:i,className:d,isValid:u=!1,isInvalid:h=!1,plaintext:p,readOnly:g,as:v="input",...x}=e,{controlId:j}=(0,c.useContext)(f.Z);return s=(0,m.vE)(s,"form-control"),(0,o.jsx)(v,{...x,type:r,size:l,ref:t,readOnly:g,id:i||j,className:a()(d,p?"".concat(s,"-plaintext"):s,n&&"".concat(s,"-").concat(n),"color"===r&&"".concat(s,"-color"),u&&"is-valid",h&&"is-invalid")})});v.displayName="FormControl";var x=Object.assign(v,{Feedback:d});let j=c.forwardRef((e,t)=>{let{className:s,bsPrefix:r,as:n="div",...l}=e;return r=(0,m.vE)(r,"form-floating"),(0,o.jsx)(n,{ref:t,className:a()(s,r),...l})});j.displayName="FormFloating";var y=s(6932),b=s(5837);let w=c.forwardRef((e,t)=>{let{as:s="label",bsPrefix:r,column:n=!1,visuallyHidden:l=!1,className:i,htmlFor:d,...u}=e,{controlId:h}=(0,c.useContext)(f.Z);r=(0,m.vE)(r,"form-label");let p="col-form-label";"string"==typeof n&&(p="".concat(p," ").concat(p,"-").concat(n));let g=a()(i,r,l&&"visually-hidden",n&&p);return(d=d||h,n)?(0,o.jsx)(b.Z,{ref:t,as:"label",className:g,htmlFor:d,...u}):(0,o.jsx)(s,{ref:t,className:g,htmlFor:d,...u})});w.displayName="FormLabel";let N=c.forwardRef((e,t)=>{let{bsPrefix:s,className:r,id:n,...l}=e,{controlId:i}=(0,c.useContext)(f.Z);return s=(0,m.vE)(s,"form-range"),(0,o.jsx)("input",{...l,type:"range",ref:t,className:a()(r,s),id:n||i})});N.displayName="FormRange";let E=c.forwardRef((e,t)=>{let{bsPrefix:s,size:r,htmlSize:n,className:l,isValid:i=!1,isInvalid:d=!1,id:u,...h}=e,{controlId:p}=(0,c.useContext)(f.Z);return s=(0,m.vE)(s,"form-select"),(0,o.jsx)("select",{...h,size:n,ref:t,className:a()(l,s,r&&"".concat(s,"-").concat(r),i&&"is-valid",d&&"is-invalid"),id:u||p})});E.displayName="FormSelect";let Z=c.forwardRef((e,t)=>{let{bsPrefix:s,className:r,as:n="small",muted:l,...c}=e;return s=(0,m.vE)(s,"form-text"),(0,o.jsx)(n,{...c,ref:t,className:a()(r,s,l&&"text-muted")})});Z.displayName="FormText";let k=c.forwardRef((e,t)=>(0,o.jsx)(g,{...e,ref:t,type:"switch"}));k.displayName="Switch";var F=Object.assign(k,{Input:g.Input,Label:g.Label}),C=s(4018);let R={_ref:l().any,validated:l().bool,as:l().elementType},S=c.forwardRef((e,t)=>{let{className:s,validated:r,as:n="form",...l}=e;return(0,o.jsx)(n,{...l,ref:t,className:a()(s,r&&"was-validated")})});S.displayName="Form",S.propTypes=R;var _=Object.assign(S,{Group:y.Z,Control:x,Floating:j,Check:g,Switch:F,Label:w,Text:Z,Range:N,Select:E,FloatingLabel:C.Z})},4331:function(e,t,s){"use strict";var r=s(2187),a=s.n(r),n=s(5271),l=s(556),c=s(4982),o=s(2676);let i=n.forwardRef((e,t)=>{let{id:s,bsPrefix:r,className:i,type:d="checkbox",isValid:u=!1,isInvalid:f=!1,as:m="input",...h}=e,{controlId:p}=(0,n.useContext)(l.Z);return r=(0,c.vE)(r,"form-check-input"),(0,o.jsx)(m,{...h,ref:t,type:d,id:s||p,className:a()(i,r,u&&"is-valid",f&&"is-invalid")})});i.displayName="FormCheckInput",t.Z=i},556:function(e,t,s){"use strict";let r=s(5271).createContext({});t.Z=r},6932:function(e,t,s){"use strict";var r=s(5271),a=s(556),n=s(2676);let l=r.forwardRef((e,t)=>{let{controlId:s,as:l="div",...c}=e,o=(0,r.useMemo)(()=>({controlId:s}),[s]);return(0,n.jsx)(a.Z.Provider,{value:o,children:(0,n.jsx)(l,{...c,ref:t})})});l.displayName="FormGroup",t.Z=l},8533:function(e,t,s){"use strict";var r=s(2187),a=s.n(r),n=s(5271),l=s(4982),c=s(2676);let o=n.forwardRef((e,t)=>{let{bsPrefix:s,className:r,striped:n,bordered:o,borderless:i,hover:d,size:u,variant:f,responsive:m,...h}=e,p=(0,l.vE)(s,"table"),g=a()(r,p,f&&"".concat(p,"-").concat(f),u&&"".concat(p,"-").concat(u),n&&"".concat(p,"-").concat("string"==typeof n?"striped-".concat(n):"striped"),o&&"".concat(p,"-bordered"),i&&"".concat(p,"-borderless"),d&&"".concat(p,"-hover")),v=(0,c.jsx)("table",{...h,className:g,ref:t});if(m){let e="".concat(p,"-responsive");return"string"==typeof m&&(e="".concat(e,"-").concat(m)),(0,c.jsx)("div",{className:e,children:v})}return v});t.Z=o},8166:function(e,t,s){"use strict";s.d(t,{b:function(){return n}});var r=s(4961),a=s(5139);class n{static async request_url(e,t,s,n){let l=new URLSearchParams(s);return l.append("lang",localStorage.getItem("language")||"en"),l.append("token",localStorage.getItem("token")||""),fetch("/api/"+(t+=(t.includes("?")?"&":"?")+l.toString()),{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},redirect:"manual"}).then(e=>e.json()).then(e=>(e.success?(n.showSuccess&&r.X.emit("newAlert",{message:e.message,variant:"success"}),n.success&&n.success(e.result)):(n.hideFailure||r.X.emit("newAlert",{message:e.message,variant:"danger"}),n.failure&&n.failure(e.result)),e.result)).catch(e=>{n.hideError||r.X.emit("newAlert",{message:(0,a.t)("networkError"),variant:"danger"}),n.error&&n.error(e)})}static async request_body(e,t,s,n){fetch("/api/"+t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({params:s.params||{},lang:localStorage.getItem("language")||"en",token:localStorage.getItem("token")||""}),redirect:"manual"}).then(e=>e.json()).then(e=>{e.success?(n.showSuccess&&r.X.emit("newAlert",{message:e.message,variant:"success"}),n.success&&n.success(e.result)):(n.hideFailure||r.X.emit("newAlert",{message:e.message,variant:"danger"}),n.failure&&n.failure(e.result))}).catch(e=>{n.hideError||r.X.emit("newAlert",{message:(0,a.t)("networkError"),variant:"danger"}),n.error&&n.error(e)})}static async Get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.request_url("GET",e,t,s)}static async Post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.request_body("POST",e,t,s)}static async Put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.request_body("PUT",e,t,s)}static async Delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.request_url("DELETE",e,t,s)}static async SWRGet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((s,r)=>{n.Get(e,t,{success:e=>s(e),failure:e=>r(e),error:e=>r(e)})})}static success(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.writableEnded||(e.status(200).json({success:!0,message:t,result:s}),e.end())}static failure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.writableEnded||(e.status(200).json({success:!1,message:t,result:{}}),e.end())}}},5954:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(2676),a=s(7976),n=s.n(a),l=s(5324),c=s(8166),o=s(5271),i=s(9505),d=s(8533),u=s(4703),f=s(8801);let m=["login","financeWrite","createUser","listUser","updateOtherPassword","updatePermission","updateOtherInfo","changeStudentBasicInfo"];function h(){let{t:e}=l.default,[t,s]=(0,o.useState)(null),[a,h]=(0,o.useState)(-1),{data:p}=(0,i.ZP)(t?"user?userIdList="+t:null,c.b.SWRGet),{data:g}=(0,i.ZP)(()=>null==p?null:"student?studentIdList="+p.user.map(e=>e.studentId).join(","),c.b.SWRGet);return g&&-1==a&&h(p.user[0].permission),(0,o.useEffect)(()=>{"undefined"!=typeof location&&s(parseInt(new URLSearchParams(location.search).get("userId")||""))}),console.log(a),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n(),{children:(0,r.jsx)("title",{children:e("permission")+" - "+e("brand")})}),(0,r.jsxs)("h3",{children:[e("permission"),g?" - "+g.student.map(e=>e.studentName).join(", "):null]}),p&&(0,r.jsxs)(d.Z,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:e("permission")}),(0,r.jsx)("th",{children:e("status")})]})}),(0,r.jsx)("tbody",{children:m.map((t,s)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e(t)}),(0,r.jsx)("td",{children:(()=>{let t=(a&1<<s)!=0;return(0,r.jsx)(u.Z.Check,{type:"switch",label:e(t?"enabled":"disabled"),checked:t,onChange:()=>{console.log(a,s,a^1<<s),h(a^1<<s)}})})()})]},s))})]}),(0,r.jsx)(f.Z,{onClick:()=>{c.b.Put("user",{params:{userId:t,permission:a}},{showSuccess:!0})},children:e("update")})]})}}},function(e){e.O(0,[368,888,774,179],function(){return e(e.s=751)}),_N_E=e.O()}]);