(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{6415:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return r(2399)}])},631:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n=r(2187),s=r.n(n),a=r(5271),l=r(4982),i=r(4331),o=r(8210),c=r(2676);let u=a.forwardRef((e,t)=>{let{className:r,bsPrefix:n,as:a="span",...i}=e;return n=(0,l.vE)(n,"input-group-text"),(0,c.jsx)(a,{ref:t,className:s()(r,n),...i})});u.displayName="InputGroupText";let d=a.forwardRef((e,t)=>{let{bsPrefix:r,size:n,hasValidation:i,className:u,as:d="div",...h}=e;r=(0,l.vE)(r,"input-group");let m=(0,a.useMemo)(()=>({}),[]);return(0,c.jsx)(o.Z.Provider,{value:m,children:(0,c.jsx)(d,{ref:t,...h,className:s()(u,r,n&&"".concat(r,"-").concat(n),i&&"has-validation")})})});d.displayName="InputGroup";var h=Object.assign(d,{Text:u,Radio:e=>(0,c.jsx)(u,{children:(0,c.jsx)(i.Z,{type:"radio",...e})}),Checkbox:e=>(0,c.jsx)(u,{children:(0,c.jsx)(i.Z,{type:"checkbox",...e})})})},4074:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var n=r(5271),s=r(2187),a=r.n(s),l=r(4982),i=r(5837);function o(e){let{animation:t,bg:r,bsPrefix:n,size:s,...o}=e;n=(0,l.vE)(n,"placeholder");let[{className:c,...u}]=(0,i.r)(o);return{...u,className:a()(c,t?"".concat(n,"-").concat(t):n,s&&"".concat(n,"-").concat(s),r&&"bg-".concat(r))}}var c=r(8801),u=r(2676);let d=n.forwardRef((e,t)=>{let r=o(e);return(0,u.jsx)(c.Z,{...r,ref:t,disabled:!0,tabIndex:-1})});d.displayName="PlaceholderButton";let h=n.forwardRef((e,t)=>{let{as:r="span",...n}=e,s=o(n);return(0,u.jsx)(r,{...s,ref:t})});h.displayName="Placeholder";var m=Object.assign(h,{Button:d})},5940:function(e,t,r){"use strict";var n=r(2187),s=r.n(n),a=r(5271),l=r(4982),i=r(2676);let o=a.forwardRef((e,t)=>{let{bsPrefix:r,className:n,as:a="div",...o}=e,c=(0,l.vE)(r,"row"),u=(0,l.pi)(),d=(0,l.zG)(),h="".concat(c,"-cols"),m=[];return u.forEach(e=>{let t;let r=o[e];delete o[e],null!=r&&"object"==typeof r?{cols:t}=r:t=r,null!=t&&m.push("".concat(h).concat(e!==d?"-".concat(e):"","-").concat(t))}),(0,i.jsx)(a,{ref:t,...o,className:s()(n,c,...m)})});o.displayName="Row",t.Z=o},8533:function(e,t,r){"use strict";var n=r(2187),s=r.n(n),a=r(5271),l=r(4982),i=r(2676);let o=a.forwardRef((e,t)=>{let{bsPrefix:r,className:n,striped:a,bordered:o,borderless:c,hover:u,size:d,variant:h,responsive:m,...p}=e,f=(0,l.vE)(r,"table"),g=s()(n,f,h&&"".concat(f,"-").concat(h),d&&"".concat(f,"-").concat(d),a&&"".concat(f,"-").concat("string"==typeof a?"striped-".concat(a):"striped"),o&&"".concat(f,"-bordered"),c&&"".concat(f,"-borderless"),u&&"".concat(f,"-hover")),v=(0,i.jsx)("table",{...p,className:g,ref:t});if(m){let e="".concat(f,"-responsive");return"string"==typeof m&&(e="".concat(e,"-").concat(m)),(0,i.jsx)("div",{className:e,children:v})}return v});t.Z=o},8166:function(e,t,r){"use strict";r.d(t,{b:function(){return a}});var n=r(4961),s=r(5139);class a{static async request_url(e,t,r,a){let l=new URLSearchParams(r);return l.append("lang",localStorage.getItem("language")||"en"),l.append("token",localStorage.getItem("token")||""),fetch("/api/"+(t+=(t.includes("?")?"&":"?")+l.toString()),{method:e,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>(e.success?(a.showSuccess&&n.X.emit("newAlert",{message:e.message,variant:"success"}),a.success&&a.success(e.result)):(a.hideFailure||n.X.emit("newAlert",{message:e.message,variant:"danger"}),a.failure&&a.failure(e.result)),e.result)).catch(e=>{a.hideError||n.X.emit("newAlert",{message:(0,s.t)("networkError"),variant:"danger"}),a.error&&a.error(e)})}static async request_body(e,t,r,a){fetch("/api/"+t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({params:r.params||{},lang:localStorage.getItem("language")||"en",token:localStorage.getItem("token")||""})}).then(e=>e.json()).then(e=>{e.success?(a.showSuccess&&n.X.emit("newAlert",{message:e.message,variant:"success"}),a.success&&a.success(e.result)):(a.hideFailure||n.X.emit("newAlert",{message:e.message,variant:"danger"}),a.failure&&a.failure(e.result))}).catch(e=>{a.hideError||n.X.emit("newAlert",{message:(0,s.t)("networkError"),variant:"danger"}),a.error&&a.error(e)})}static async Get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.request_url("GET",e,t,r)}static async Post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.request_body("POST",e,t,r)}static async Put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.request_body("PUT",e,t,r)}static async Delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.request_url("DELETE",e,t,r)}static async SWRGet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((r,n)=>{a.Get(e,t,{success:e=>r(e),failure:e=>n(e),error:e=>n(e)})})}static success(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.writableEnded||(e.status(200).json({success:!0,message:t,result:r}),e.end())}static failure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.writableEnded||(e.status(200).json({success:!1,message:t,result:{}}),e.end())}}},2399:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n=r(2676),s=r(5271),a=r(5324),l=r(7976),i=r.n(l),o=r(9505),c=r(8166),u=r(4703),d=r(5940),h=r(5837),m=r(631),p=r(8801),f=r(8533),g=r(4074),v=r(1228),j=r(9722),x=r(507),w=r.n(x),y=["color","size","title","className"];function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Z=(0,s.forwardRef)(function(e,t){var r=e.color,n=e.size,a=e.title,l=e.className,i=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,y);return s.createElement("svg",b({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:r,className:["bi","bi-question",l].filter(Boolean).join(" ")},i),a?s.createElement("title",null,a):null,s.createElement("path",{d:"M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286m1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94"}))});Z.propTypes={color:w().string,size:w().oneOfType([w().string,w().number]),title:w().string,className:w().string},Z.defaultProps={color:"currentColor",size:"1em",title:null,className:""};var O=["color","size","title","className"];function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var E=(0,s.forwardRef)(function(e,t){var r=e.color,n=e.size,a=e.title,l=e.className,i=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,O);return s.createElement("svg",N({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:r,className:["bi","bi-key",l].filter(Boolean).join(" ")},i),a?s.createElement("title",null,a):null,s.createElement("path",{d:"M0 8a4 4 0 0 1 7.465-2H14a.5.5 0 0 1 .354.146l1.5 1.5a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0L13 9.207l-.646.647a.5.5 0 0 1-.708 0L11 9.207l-.646.647a.5.5 0 0 1-.708 0L9 9.207l-.646.647A.5.5 0 0 1 8 10h-.535A4 4 0 0 1 0 8m4-3a3 3 0 1 0 2.712 4.285A.5.5 0 0 1 7.163 9h.63l.853-.854a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.793-.793-1-1h-6.63a.5.5 0 0 1-.451-.285A3 3 0 0 0 4 5"}),s.createElement("path",{d:"M4 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0"}))});E.propTypes={color:w().string,size:w().oneOfType([w().string,w().number]),title:w().string,className:w().string},E.defaultProps={color:"currentColor",size:"1em",title:null,className:""};var I=r(3698);function S(){let{t:e}=a.default,[t,r]=s.useState(null);(0,s.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("userId");null!=e?r(parseInt(e)):r(null)},[]);let{data:l,mutate:x}=(0,o.ZP)(t?"user?userIdList="+t:"user",c.b.SWRGet),{data:w,mutate:y}=(0,o.ZP)(()=>null==l?null:"student?studentIdList="+l.user.map(e=>e.studentId).join(","),c.b.SWRGet),b=()=>{x(),y()};if(null==t)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:e("user")+" - "+e("brand")})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:e("user")}),(0,n.jsx)(v.J9,{validationSchema:j.Ry().shape({username:j.Z_().typeError(e("requireString")).required(e("required")).min(4,e("minLen4")).max(16,e("maxLen16")),password:j.Z_().typeError(e("requireString")).required(e("required")).min(8,e("minLen8")).max(64,e("maxLen64")).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{}|;':",.<>\/?]).{8,64}$/,e("requireStrongPassword")),studentId:j.Rx().typeError(e("requireNumber")).required(e("required")).min(1,e("min1")).max(38,e("max38")),permission:j.Rx().typeError(e("requireNumber")).required(e("required")).min(0,e("min0"))}),onSubmit:e=>{c.b.Post("user",{params:e},{success:()=>{b()},showSuccess:!0})},initialValues:{username:"",password:"",studentId:0,permission:5},children:t=>{let{handleSubmit:r,handleChange:s,handleBlur:a,values:l,touched:i,errors:o}=t;return(0,n.jsx)(u.Z,{noValidate:!0,onSubmit:r,children:(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(h.Z,{children:(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(m.Z.Text,{children:e("username")}),(0,n.jsx)(u.Z.Control,{type:"text",name:"username",value:l.username,onChange:s,onBlur:a,isInvalid:i.username&&null!=o.username}),(0,n.jsx)(u.Z.Control.Feedback,{type:"invalid",children:o.username})]})}),(0,n.jsx)(h.Z,{children:(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(m.Z.Text,{children:e("password")}),(0,n.jsx)(u.Z.Control,{type:"password",name:"password",value:l.password,onChange:s,onBlur:a,isInvalid:i.password&&null!=o.password}),(0,n.jsx)(u.Z.Control.Feedback,{type:"invalid",children:o.password})]})}),(0,n.jsx)(h.Z,{children:(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(m.Z.Text,{children:e("studentId")}),(0,n.jsx)(u.Z.Control,{type:"number",name:"studentId",value:l.studentId,onChange:s,onBlur:a,isInvalid:i.studentId&&null!=o.studentId}),(0,n.jsx)(u.Z.Control.Feedback,{type:"invalid",children:o.studentId})]})}),(0,n.jsx)(h.Z,{children:(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(m.Z.Text,{children:e("permission")}),(0,n.jsx)(u.Z.Control,{type:"number",name:"permission",value:l.permission,onChange:s,onBlur:a,isInvalid:i.permission&&null!=o.permission}),(0,n.jsx)(u.Z.Control.Feedback,{type:"invalid",children:o.permission})]})}),(0,n.jsx)(h.Z,{children:(0,n.jsx)(p.Z,{type:"submit",children:e("create")})})]})})}}),(0,n.jsxs)(f.Z,{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:e("id")}),(0,n.jsx)("th",{children:e("username")}),(0,n.jsx)("th",{children:e("studentId")}),(0,n.jsx)("th",{children:e("studentName")}),(0,n.jsx)("th",{children:e("lastOnline")}),(0,n.jsx)("th",{children:e("operation")})]})}),(0,n.jsx)("tbody",{children:l&&l.user.map(t=>{var r;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:t.userId}),(0,n.jsx)("td",{children:t.username}),(0,n.jsx)("td",{children:t.studentId}),(0,n.jsx)("td",{children:w?null===(r=w.student.find(e=>e.studentId==t.studentId))||void 0===r?void 0:r.studentName:(0,n.jsx)(g.Z,{className:"ms-2",animation:"wave",children:(0,n.jsx)(g.Z,{as:h.Z,xs:12})})}),(0,n.jsx)("td",{children:new Date(t.lastOnline).toLocaleString()}),(0,n.jsxs)("td",{children:[(0,n.jsxs)(p.Z,{onClick:()=>{location.href="/userInfo?userId="+t.userId},variant:"outline-success",size:"sm",className:"me-2",children:[(0,n.jsx)(Z,{className:"me-1"}),e("password")]}),(0,n.jsxs)(p.Z,{onClick:()=>{location.href="/permission?userId="+t.userId},variant:"outline-warning",size:"sm",className:"me-2",children:[(0,n.jsx)(E,{className:"me-1"}),e("permission")]}),(0,n.jsxs)(p.Z,{onClick:()=>{c.b.Delete("user",{userId:t.userId.toString()},{success:()=>{b()},showSuccess:!0})},variant:"danger",size:"sm",children:[(0,n.jsx)(I.Z,{className:"me-1"}),e("delete")]})]})]},t.userId)})})]})]})]})}},3698:function(e,t,r){"use strict";var n=r(5271),s=r(507),a=r.n(s),l=["color","size","title","className"];function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=(0,n.forwardRef)(function(e,t){var r=e.color,s=e.size,a=e.title,o=e.className,c=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,l);return n.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:s,height:s,fill:r,className:["bi","bi-trash",o].filter(Boolean).join(" ")},c),a?n.createElement("title",null,a):null,n.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),n.createElement("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"}))});o.propTypes={color:a().string,size:a().oneOfType([a().string,a().number]),title:a().string,className:a().string},o.defaultProps={color:"currentColor",size:"1em",title:null,className:""},t.Z=o}},function(e){e.O(0,[368,4,888,774,179],function(){return e(e.s=6415)}),_N_E=e.O()}]);