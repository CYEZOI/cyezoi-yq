(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{6415:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return n(805)}])},631:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(2187),s=n.n(r),a=n(5271),l=n(4982),i=n(4331),c=n(8210),o=n(2676);let d=a.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:a="span",...i}=e;return r=(0,l.vE)(r,"input-group-text"),(0,o.jsx)(a,{ref:t,className:s()(n,r),...i})});d.displayName="InputGroupText";let u=a.forwardRef((e,t)=>{let{bsPrefix:n,size:r,hasValidation:i,className:d,as:u="div",...h}=e;n=(0,l.vE)(n,"input-group");let m=(0,a.useMemo)(()=>({}),[]);return(0,o.jsx)(c.Z.Provider,{value:m,children:(0,o.jsx)(u,{ref:t,...h,className:s()(d,n,r&&"".concat(n,"-").concat(r),i&&"has-validation")})})});u.displayName="InputGroup";var h=Object.assign(u,{Text:d,Radio:e=>(0,o.jsx)(d,{children:(0,o.jsx)(i.Z,{type:"radio",...e})}),Checkbox:e=>(0,o.jsx)(d,{children:(0,o.jsx)(i.Z,{type:"checkbox",...e})})})},4074:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(5271),s=n(2187),a=n.n(s),l=n(4982),i=n(5837);function c(e){let{animation:t,bg:n,bsPrefix:r,size:s,...c}=e;r=(0,l.vE)(r,"placeholder");let[{className:o,...d}]=(0,i.r)(c);return{...d,className:a()(o,t?"".concat(r,"-").concat(t):r,s&&"".concat(r,"-").concat(s),n&&"bg-".concat(n))}}var o=n(8801),d=n(2676);let u=r.forwardRef((e,t)=>{let n=c(e);return(0,d.jsx)(o.Z,{...n,ref:t,disabled:!0,tabIndex:-1})});u.displayName="PlaceholderButton";let h=r.forwardRef((e,t)=>{let{as:n="span",...r}=e,s=c(r);return(0,d.jsx)(n,{...s,ref:t})});h.displayName="Placeholder";var m=Object.assign(h,{Button:u})},5940:function(e,t,n){"use strict";var r=n(2187),s=n.n(r),a=n(5271),l=n(4982),i=n(2676);let c=a.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:a="div",...c}=e,o=(0,l.vE)(n,"row"),d=(0,l.pi)(),u=(0,l.zG)(),h="".concat(o,"-cols"),m=[];return d.forEach(e=>{let t;let n=c[e];delete c[e],null!=n&&"object"==typeof n?{cols:t}=n:t=n,null!=t&&m.push("".concat(h).concat(e!==u?"-".concat(e):"","-").concat(t))}),(0,i.jsx)(a,{ref:t,...c,className:s()(r,o,...m)})});c.displayName="Row",t.Z=c},8533:function(e,t,n){"use strict";var r=n(2187),s=n.n(r),a=n(5271),l=n(4982),i=n(2676);let c=a.forwardRef((e,t)=>{let{bsPrefix:n,className:r,striped:a,bordered:c,borderless:o,hover:d,size:u,variant:h,responsive:m,...p}=e,x=(0,l.vE)(n,"table"),j=s()(r,x,h&&"".concat(x,"-").concat(h),u&&"".concat(x,"-").concat(u),a&&"".concat(x,"-").concat("string"==typeof a?"striped-".concat(a):"striped"),c&&"".concat(x,"-bordered"),o&&"".concat(x,"-borderless"),d&&"".concat(x,"-hover")),f=(0,i.jsx)("table",{...p,className:j,ref:t});if(m){let e="".concat(x,"-responsive");return"string"==typeof m&&(e="".concat(e,"-").concat(m)),(0,i.jsx)("div",{className:e,children:f})}return f});t.Z=c},8166:function(e,t,n){"use strict";n.d(t,{b:function(){return s}});var r=n(4961);class s{static async request_url(e,t,n,s){let a=new URLSearchParams(n);return a.append("lang",localStorage.getItem("language")||"en"),a.append("token",localStorage.getItem("token")||""),fetch("/api/"+(t+=(t.includes("?")?"&":"?")+a.toString()),{method:e,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>(e.success?(r.X.emit("newAlert",{message:e.message,variant:"success"}),s.success&&s.success(e.result)):(r.X.emit("newAlert",{message:e.message,variant:"danger"}),s.failure&&s.failure(e.result)),e.result)).catch(e=>{r.X.emit("newAlert",{message:"API Error",variant:"danger"}),s.error&&s.error(e)})}static async request_body(e,t,n,s){fetch("/api/"+t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({params:n.params||{},lang:localStorage.getItem("language")||"en",token:localStorage.getItem("token")||""})}).then(e=>e.json()).then(e=>{e.success?(r.X.emit("newAlert",{message:e.message,variant:"success"}),s.success&&s.success(e.result)):(r.X.emit("newAlert",{message:e.message,variant:"danger"}),s.failure&&s.failure(e.result))}).catch(e=>{r.X.emit("newAlert",{message:"API Error",variant:"danger"}),s.error&&s.error(e)})}static async Get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.request_url("GET",e,t,n)}static async Post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.request_body("POST",e,t,n)}static async Put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.request_body("PUT",e,t,n)}static async Delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.request_url("DELETE",e,t,n)}static async SWRGet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((n,r)=>{s.Get(e,t,{success:e=>n(e),failure:e=>r(e),error:e=>r(e)})})}static success(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.writableEnded||(e.status(200).json({success:!0,message:t,result:n}),e.end())}static failure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.writableEnded||(e.status(200).json({success:!1,message:t,result:{}}),e.end())}}},805:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(2676);n(5271);var s=n(3232),a=n(7976),l=n.n(a),i=n(9505),c=n(8166),o=n(4703),d=n(5940),u=n(5837),h=n(631),m=n(8801),p=n(8533),x=n(4074),j=n(1228),f=n(9722),g=n(3698);function v(){let{t:e}=s.default,{data:t,mutate:n}=(0,i.ZP)("user",c.b.SWRGet),{data:a,mutate:v}=(0,i.ZP)(()=>null==t?null:"student?studentIdList="+t.user.map(e=>e.studentId).join(","),c.b.SWRGet),y=()=>{n(),v()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l(),{children:(0,r.jsx)("title",{children:e("user")+" - "+e("brand")})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:e("user")}),(0,r.jsx)(j.J9,{validationSchema:f.Ry().shape({username:f.Z_().typeError(e("requireString")).required(e("required")).min(4,e("minLen4")).max(16,e("maxLen16")),password:f.Z_().typeError(e("requireString")).required(e("required")).min(8,e("minLen8")).max(64,e("maxLen64")).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{}|;':",.<>\/?]).{8,64}$/,e("requireStrongPassword")),studentId:f.Rx().typeError(e("requireNumber")).required(e("required")).min(1,e("min1")).max(38,e("max38"))}),onSubmit:e=>{c.b.Post("user",{params:e},{success:()=>{y()}})},initialValues:{username:"",password:"",studentId:0},children:t=>{let{handleSubmit:n,handleChange:s,handleBlur:a,values:l,touched:i,errors:c}=t;return(0,r.jsx)(o.Z,{noValidate:!0,onSubmit:n,children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(u.Z,{children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(h.Z.Text,{children:e("username")}),(0,r.jsx)(o.Z.Control,{type:"text",name:"username",value:l.username,onChange:s,onBlur:a,isInvalid:i.username&&null!=c.username}),(0,r.jsx)(o.Z.Control.Feedback,{type:"invalid",children:c.username})]})}),(0,r.jsx)(u.Z,{children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(h.Z.Text,{children:e("password")}),(0,r.jsx)(o.Z.Control,{type:"password",name:"password",value:l.password,onChange:s,onBlur:a,isInvalid:i.password&&null!=c.password}),(0,r.jsx)(o.Z.Control.Feedback,{type:"invalid",children:c.password})]})}),(0,r.jsx)(u.Z,{children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(h.Z.Text,{children:e("studentId")}),(0,r.jsx)(o.Z.Control,{type:"number",name:"studentId",value:l.studentId,onChange:s,onBlur:a,isInvalid:i.studentId&&null!=c.studentId}),(0,r.jsx)(o.Z.Control.Feedback,{type:"invalid",children:c.studentId})]})}),(0,r.jsx)(u.Z,{children:(0,r.jsx)(m.Z,{type:"submit",children:e("create")})})]})})}}),(0,r.jsxs)(p.Z,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:e("id")}),(0,r.jsx)("th",{children:e("username")}),(0,r.jsx)("th",{children:e("studentId")}),(0,r.jsx)("th",{children:e("studentName")}),(0,r.jsx)("th",{children:e("permission")}),(0,r.jsx)("th",{children:e("lastOnline")}),(0,r.jsx)("th",{children:e("operation")})]})}),(0,r.jsx)("tbody",{children:t&&t.user.map(t=>{var n;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t.userId}),(0,r.jsx)("td",{children:t.username}),(0,r.jsx)("td",{children:t.studentId}),(0,r.jsx)("td",{children:a?null===(n=a.student.find(e=>e.studentId==t.studentId))||void 0===n?void 0:n.studentName:(0,r.jsx)(x.Z,{className:"ms-2",animation:"wave",children:(0,r.jsx)(x.Z,{as:u.Z,xs:12})})}),(0,r.jsx)("td",{children:t.permission}),(0,r.jsx)("td",{children:new Date(t.lastOnline).toLocaleString()}),(0,r.jsx)("td",{children:(0,r.jsxs)(m.Z,{onClick:()=>{c.b.Delete("user",{userId:t.userId.toString()},{success:()=>{y()}})},variant:"danger",size:"sm",children:[(0,r.jsx)(g.Z,{className:"me-1"}),e("delete")]})})]},t.userId)})})]})]})]})}},3698:function(e,t,n){"use strict";var r=n(5271),s=n(507),a=n.n(s),l=["color","size","title","className"];function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=(0,r.forwardRef)(function(e,t){var n=e.color,s=e.size,a=e.title,c=e.className,o=function(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,l);return r.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:s,height:s,fill:n,className:["bi","bi-trash",c].filter(Boolean).join(" ")},o),a?r.createElement("title",null,a):null,r.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),r.createElement("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"}))});c.propTypes={color:a().string,size:a().oneOfType([a().string,a().number]),title:a().string,className:a().string},c.defaultProps={color:"currentColor",size:"1em",title:null,className:""},t.Z=c}},function(e){e.O(0,[368,4,888,774,179],function(){return e(e.s=6415)}),_N_E=e.O()}]);