(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{512:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(640)}])},8166:function(e,t,s){"use strict";s.d(t,{b:function(){return r}});var n=s(4961);class r{static async request_url(e,t,s,r){let a=new URLSearchParams(s);return a.append("lang",localStorage.getItem("language")||"en"),a.append("token",localStorage.getItem("token")||""),fetch("/api/"+(t+=(t.includes("?")?"&":"?")+a.toString()),{method:e,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>(e.success?(n.X.emit("newAlert",{message:e.message,variant:"success"}),r.success&&r.success(e.result)):(n.X.emit("newAlert",{message:e.message,variant:"danger"}),r.failure&&r.failure(e.result)),e.result)).catch(e=>{n.X.emit("newAlert",{message:"API Error",variant:"danger"}),r.error&&r.error(e)})}static async request_body(e,t,s,r){fetch("/api/"+t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({params:s.params||{},lang:localStorage.getItem("language")||"en",token:localStorage.getItem("token")||""})}).then(e=>e.json()).then(e=>{e.success?(n.X.emit("newAlert",{message:e.message,variant:"success"}),r.success&&r.success(e.result)):(n.X.emit("newAlert",{message:e.message,variant:"danger"}),r.failure&&r.failure(e.result))}).catch(e=>{n.X.emit("newAlert",{message:"API Error",variant:"danger"}),r.error&&r.error(e)})}static async Get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.request_url("GET",e,t,s)}static async Post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.request_body("POST",e,t,s)}static async Put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.request_body("PUT",e,t,s)}static async Delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.request_url("DELETE",e,t,s)}static async SWRGet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((s,n)=>{r.Get(e,t,{success:e=>s(e),failure:e=>n(e),error:e=>n(e)})})}static success(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.writableEnded||(e.status(200).json({success:!0,message:t,result:s}),e.end())}static failure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.writableEnded||(e.status(200).json({success:!1,message:t,result:{}}),e.end())}}},640:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var n=s(2676),r=s(7976),a=s.n(r),l=s(3232),i=s(1228),o=s(9722),u=s(8166),c=s(4703),d=s(4018),m=s(8801),g=s(5271);function h(){let{t:e}=l.default,[t,s]=(0,g.useState)(""),[r,h]=(0,g.useState)("");return(0,g.useEffect)(()=>{if("undefined"!=typeof location){let e=new URLSearchParams(location.search);s(e.get("username")||""),h(e.get("password")||"")}}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a(),{children:(0,n.jsx)("title",{children:e("login")+" - "+e("brand")})}),(0,n.jsx)("h3",{children:e("login")}),(0,n.jsx)(i.J9,{validationSchema:o.Ry().shape({username:o.Z_().typeError(e("requireString")).required(e("required")).min(4,e("minLen4")).max(16,e("maxLen16")),password:o.Z_().typeError(e("requireString")).required(e("required")).min(8,e("minLen8")).max(64,e("maxLen64")).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{}|;':",.<>\/?]).{8,64}$/,e("requireStrongPassword"))}),onSubmit:e=>{u.b.Get("login",e,{success:e=>{let t=e.userId,s=e.token;localStorage.setItem("userId",t),localStorage.setItem("token",s),u.b.Get("user",{userIdList:t},{success:e=>{let t=e.user[0].studentId;localStorage.setItem("studentId",t),u.b.Get("student",{studentIdList:t},{success:e=>{let t=e.student[0].studentName;localStorage.setItem("studentName",t),location.href="/"}})}})}})},initialValues:{username:t,password:r},enableReinitialize:!0,children:t=>{let{handleSubmit:s,handleChange:r,handleBlur:a,values:l,touched:i,errors:o}=t;return(0,n.jsxs)(c.Z,{noValidate:!0,onSubmit:s,children:[(0,n.jsxs)(d.Z,{controlId:"username",label:e("username"),className:"mb-3",children:[(0,n.jsx)(c.Z.Control,{type:"text",placeholder:e("username"),name:"username",value:l.username,onBlur:a,onChange:r,isInvalid:i.username&&null!=o.username}),(0,n.jsx)(c.Z.Control.Feedback,{type:"invalid",children:o.username})]}),(0,n.jsxs)(d.Z,{controlId:"password",label:e("password"),className:"mb-3",children:[(0,n.jsx)(c.Z.Control,{type:"password",placeholder:e("password"),name:"password",value:l.password,onBlur:a,onChange:r,isInvalid:i.password&&null!=o.password}),(0,n.jsx)(c.Z.Control.Feedback,{type:"invalid",children:o.password})]}),(0,n.jsx)(m.Z,{type:"submit",children:e("login")})]})}})]})}},7976:function(e,t,s){e.exports=s(6627)}},function(e){e.O(0,[4,888,774,179],function(){return e(e.s=512)}),_N_E=e.O()}]);