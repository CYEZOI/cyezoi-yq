(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[504],{5752:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/finance",function(){return n(6193)}])},8533:function(e,t,n){"use strict";var a=n(2187),r=n.n(a),s=n(5271),c=n(4982),i=n(2676);let l=s.forwardRef((e,t)=>{let{bsPrefix:n,className:a,striped:s,bordered:l,borderless:o,hover:d,size:u,variant:h,responsive:m,...x}=e,j=(0,c.vE)(n,"table"),p=r()(a,j,h&&"".concat(j,"-").concat(h),u&&"".concat(j,"-").concat(u),s&&"".concat(j,"-").concat("string"==typeof s?"striped-".concat(s):"striped"),l&&"".concat(j,"-bordered"),o&&"".concat(j,"-borderless"),d&&"".concat(j,"-hover")),f=(0,i.jsx)("table",{...x,className:p,ref:t});if(m){let e="".concat(j,"-responsive");return"string"==typeof m&&(e="".concat(e,"-").concat(m)),(0,i.jsx)("div",{className:e,children:f})}return f});t.Z=l},8166:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var a=n(4961);class r{static async request_url(e,t,n,r){let s=new URLSearchParams(n);return s.append("lang",localStorage.getItem("language")||"en"),fetch("/api/"+(t+=(t.includes("?")?"&":"?")+s.toString()),{method:e,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>(e.success?(a.X.emit("newAlert",{message:e.message,variant:"success"}),r.success&&r.success(e.result)):(a.X.emit("newAlert",{message:e.message,variant:"danger"}),r.failure&&r.failure(e.result)),e.result)).catch(e=>{a.X.emit("newAlert",{message:"API Error",variant:"danger"}),r.error&&r.error(e)})}static async request_body(e,t,n,r){fetch("/api/"+t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({params:n.params||{},lang:localStorage.getItem("language")||"en"})}).then(e=>e.json()).then(e=>{e.success?(a.X.emit("newAlert",{message:e.message,variant:"success"}),r.success&&r.success(e.result)):(a.X.emit("newAlert",{message:e.message,variant:"danger"}),r.failure&&r.failure(e.result))}).catch(e=>{a.X.emit("newAlert",{message:"API Error",variant:"danger"}),r.error&&r.error(e)})}static async Get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.request_url("GET",e,t,n)}static async Post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.request_body("POST",e,t,n)}static async Put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.request_body("PUT",e,t,n)}static async Delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.request_url("DELETE",e,t,n)}static async SWRGet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((n,a)=>{r.Get(e,t,{success:e=>n(e),failure:e=>a(e),error:e=>a(e)})})}static success(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.writableEnded||(e.status(200).json({success:!0,message:t,result:n}),e.end())}static failure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.writableEnded||(e.status(200).json({success:!1,message:t,result:{}}),e.end())}}},6193:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n(2676),r=n(5271),s=n(8801),c=n(4703),i=n(2187),l=n.n(i),o=n(4982),d=n(4331),u=n(8210);let h=r.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="span",...c}=e;return r=(0,o.vE)(r,"input-group-text"),(0,a.jsx)(s,{ref:t,className:l()(n,r),...c})});h.displayName="InputGroupText";let m=r.forwardRef((e,t)=>{let{bsPrefix:n,size:s,hasValidation:c,className:i,as:d="div",...h}=e;n=(0,o.vE)(n,"input-group");let m=(0,r.useMemo)(()=>({}),[]);return(0,a.jsx)(u.Z.Provider,{value:m,children:(0,a.jsx)(d,{ref:t,...h,className:l()(i,n,s&&"".concat(n,"-").concat(s),c&&"has-validation")})})});m.displayName="InputGroup";var x=Object.assign(m,{Text:h,Radio:e=>(0,a.jsx)(h,{children:(0,a.jsx)(d.Z,{type:"radio",...e})}),Checkbox:e=>(0,a.jsx)(h,{children:(0,a.jsx)(d.Z,{type:"checkbox",...e})})}),j=n(9722),p=n(1228),f=n(3232),g=n(7976),v=n.n(g);let y=r.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:s="div",...c}=e,i=(0,o.vE)(n,"row"),d=(0,o.pi)(),u=(0,o.zG)(),h="".concat(i,"-cols"),m=[];return d.forEach(e=>{let t;let n=c[e];delete c[e],null!=n&&"object"==typeof n?{cols:t}=n:t=n,null!=t&&m.push("".concat(h).concat(e!==u?"-".concat(e):"","-").concat(t))}),(0,a.jsx)(s,{ref:t,...c,className:l()(r,i,...m)})});y.displayName="Row";var b=n(5837),w=n(8533),E=n(8166),N=n(9505);function _(){let{t:e}=f.default,{data:t,mutate:n}=(0,N.ZP)("finance",E.b.SWRGet);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v(),{children:(0,a.jsx)("title",{children:e("finance")+" - "+e("brand")})}),(0,a.jsx)("h3",{children:e("finance")}),(0,a.jsx)(p.J9,{validationSchema:j.Ry().shape({money:j.Rx().typeError(e("requireNumber")).required(e("required")).min(-1e3,e("min1000")).max(1e3,e("max1000")).not([0],e("required")),detail:j.Z_().typeError("requireString").required(e("required")).min(8,e("minLen8")).max(64,e("maxLen64"))}),onSubmit:e=>{E.b.Post("finance",{params:e}).then(e=>{n()})},initialValues:{money:0,detail:""},children:t=>{let{handleSubmit:n,handleChange:r,handleBlur:i,values:l,touched:o,errors:d}=t;return(0,a.jsx)(c.Z,{noValidate:!0,onSubmit:n,children:(0,a.jsxs)(y,{children:[(0,a.jsx)(b.Z,{children:(0,a.jsxs)(x,{hasValidation:!0,children:[(0,a.jsx)(x.Text,{children:e("amount")}),(0,a.jsx)(c.Z.Control,{placeholder:e("money"),name:"money",value:l.money,onBlur:i,onChange:r,isInvalid:o.money&&null!=d.money}),(0,a.jsx)(x.Text,{children:e("RMB")}),(0,a.jsx)(c.Z.Control.Feedback,{type:"invalid",children:d.money})]})}),(0,a.jsx)(b.Z,{children:(0,a.jsxs)(x,{hasValidation:!0,children:[(0,a.jsx)(x.Text,{children:e("reason")}),(0,a.jsx)(c.Z.Control,{placeholder:e("detail"),name:"detail",value:l.detail,onBlur:i,onChange:r,isInvalid:o.detail&&null!=d.detail}),(0,a.jsx)(c.Z.Control.Feedback,{type:"invalid",children:d.detail})]})}),(0,a.jsx)(b.Z,{children:(0,a.jsx)(s.Z,{type:"submit",children:e("addButton")})})]})})}}),(0,a.jsxs)(w.Z,{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"col-2",children:e("id")}),(0,a.jsx)("th",{className:"col-2",children:e("time")}),(0,a.jsx)("th",{className:"col-2",children:e("amount")}),(0,a.jsx)("th",{className:"col-4",children:e("reason")}),(0,a.jsx)("th",{className:"col-2",children:e("operation")})]})}),(0,a.jsx)("tbody",{children:t&&t.records.map(t=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:t.financeId}),(0,a.jsx)("td",{children:new Date(t.createdAt).toLocaleString()}),(0,a.jsxs)("td",{children:[t.money," ",e("RMB")]}),(0,a.jsx)("td",{children:t.detail}),(0,a.jsx)("td",{children:(0,a.jsx)(s.Z,{onClick:()=>{E.b.Delete("finance",{financeId:t.financeId}).then(e=>{n()})},variant:"danger",size:"sm",children:e("delete")})})]},t.financeId))})]})]})}}},function(e){e.O(0,[368,4,888,774,179],function(){return e(e.s=5752)}),_N_E=e.O()}]);