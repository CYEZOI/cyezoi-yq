(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[504],{5752:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/finance",function(){return t(4042)}])},8166:function(e,n,t){"use strict";t.d(n,{b:function(){return i}});class i{static async request_url(e,n,t){let i=new URLSearchParams(t);return""!==i.toString()&&(n+="?"+i.toString()),fetch("/api/"+n,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e.result)}static async request_body(e,n,t){return fetch("/api/"+n,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({params:t.params||{}})}).then(e=>e.json()).then(e=>e.result)}static async Get(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.request_url("GET",e,n)}static async Post(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.request_body("POST",e,n)}static async Put(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.request_body("PUT",e,n)}static async Delete(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.request_url("DELETE",e,n)}static success(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.writableEnded||(e.status(200).json({success:!0,message:n,result:t}),e.end())}static failure(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.writableEnded||(e.status(200).json({success:!1,message:n,result:{}}),e.end())}}},4042:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return y}});var i=t(2676);t(5271);var r=t(8801),s=t(6794),a=t(631),l=t(9722),c=t(1228),d=t(3232),o=t(7976),h=t.n(o),u=t(5940),j=t(5837),x=t(8533),m=t(8166),p=t(9505);function y(){let{t:e}=d.default,{data:n,error:t,mutate:o}=(0,p.ZP)("finance",m.b.Get);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h(),{children:(0,i.jsx)("title",{children:e("finance")+" - "+e("brand")})}),(0,i.jsx)("h3",{children:e("finance")}),(0,i.jsx)(c.J9,{validationSchema:l.Ry().shape({money:l.Rx().typeError(e("requireNumber")).required(e("required")).min(-1e3,e("min1000")).max(1e3,e("max1000")).not([0],e("required")),detail:l.Z_().typeError("requireString").required(e("required")).min(8,e("minLen8")).max(64,e("maxLen64"))}),onSubmit:e=>{m.b.Post("finance",{params:e}).then(e=>{o()})},initialValues:{money:0,detail:""},children:n=>{let{handleSubmit:t,handleChange:l,handleBlur:c,values:d,touched:o,errors:h}=n;return(0,i.jsx)(s.Z,{noValidate:!0,onSubmit:t,children:(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(j.Z,{children:(0,i.jsxs)(a.Z,{hasValidation:!0,children:[(0,i.jsx)(a.Z.Text,{children:e("amount")}),(0,i.jsx)(s.Z.Control,{placeholder:e("money"),name:"money",value:d.money,onBlur:c,onChange:l,isInvalid:o.money&&""==h.money}),(0,i.jsx)(a.Z.Text,{children:e("RMB")}),(0,i.jsx)(s.Z.Control.Feedback,{type:"invalid",children:h.money})]})}),(0,i.jsx)(j.Z,{children:(0,i.jsxs)(a.Z,{hasValidation:!0,children:[(0,i.jsx)(a.Z.Text,{children:e("reason")}),(0,i.jsx)(s.Z.Control,{placeholder:e("detail"),name:"detail",value:d.detail,onBlur:c,onChange:l,isInvalid:o.detail&&""==h.detail}),(0,i.jsx)(s.Z.Control.Feedback,{type:"invalid",children:h.detail})]})}),(0,i.jsx)(j.Z,{children:(0,i.jsx)(r.Z,{type:"submit",children:e("addButton")})})]})})}}),(0,i.jsxs)(x.Z,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"col-2",children:e("id")}),(0,i.jsx)("th",{className:"col-2",children:e("time")}),(0,i.jsx)("th",{className:"col-2",children:e("amount")}),(0,i.jsx)("th",{className:"col-4",children:e("reason")}),(0,i.jsx)("th",{className:"col-2",children:e("operation")})]})}),(0,i.jsx)("tbody",{children:n&&n.records.map(n=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:n.financeId}),(0,i.jsx)("td",{children:new Date(n.createdAt).toLocaleString()}),(0,i.jsxs)("td",{children:[n.money," ",e("RMB")]}),(0,i.jsx)("td",{children:n.detail}),(0,i.jsx)("td",{children:(0,i.jsx)(r.Z,{onClick:()=>{m.b.Delete("finance",{financeId:n.financeId}).then(e=>{o()})},variant:"danger",size:"sm",children:e("delete")})})]},n.financeId))})]})]})}}},function(e){e.O(0,[368,37,888,774,179],function(){return e(e.s=5752)}),_N_E=e.O()}]);