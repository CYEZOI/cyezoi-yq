(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{6415:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return r(805)}])},631:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n=r(2187),s=r.n(n),a=r(5271),i=r(4982),l=r(4331),c=r(8210),o=r(2676);let d=a.forwardRef((e,t)=>{let{className:r,bsPrefix:n,as:a="span",...l}=e;return n=(0,i.vE)(n,"input-group-text"),(0,o.jsx)(a,{ref:t,className:s()(r,n),...l})});d.displayName="InputGroupText";let u=a.forwardRef((e,t)=>{let{bsPrefix:r,size:n,hasValidation:l,className:d,as:u="div",...h}=e;r=(0,i.vE)(r,"input-group");let m=(0,a.useMemo)(()=>({}),[]);return(0,o.jsx)(c.Z.Provider,{value:m,children:(0,o.jsx)(u,{ref:t,...h,className:s()(d,r,n&&"".concat(r,"-").concat(n),l&&"has-validation")})})});u.displayName="InputGroup";var h=Object.assign(u,{Text:d,Radio:e=>(0,o.jsx)(d,{children:(0,o.jsx)(l.Z,{type:"radio",...e})}),Checkbox:e=>(0,o.jsx)(d,{children:(0,o.jsx)(l.Z,{type:"checkbox",...e})})})},4074:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var n=r(5271),s=r(2187),a=r.n(s),i=r(4982),l=r(5837);function c(e){let{animation:t,bg:r,bsPrefix:n,size:s,...c}=e;n=(0,i.vE)(n,"placeholder");let[{className:o,...d}]=(0,l.r)(c);return{...d,className:a()(o,t?"".concat(n,"-").concat(t):n,s&&"".concat(n,"-").concat(s),r&&"bg-".concat(r))}}var o=r(8801),d=r(2676);let u=n.forwardRef((e,t)=>{let r=c(e);return(0,d.jsx)(o.Z,{...r,ref:t,disabled:!0,tabIndex:-1})});u.displayName="PlaceholderButton";let h=n.forwardRef((e,t)=>{let{as:r="span",...n}=e,s=c(n);return(0,d.jsx)(r,{...s,ref:t})});h.displayName="Placeholder";var m=Object.assign(h,{Button:u})},5940:function(e,t,r){"use strict";var n=r(2187),s=r.n(n),a=r(5271),i=r(4982),l=r(2676);let c=a.forwardRef((e,t)=>{let{bsPrefix:r,className:n,as:a="div",...c}=e,o=(0,i.vE)(r,"row"),d=(0,i.pi)(),u=(0,i.zG)(),h="".concat(o,"-cols"),m=[];return d.forEach(e=>{let t;let r=c[e];delete c[e],null!=r&&"object"==typeof r?{cols:t}=r:t=r,null!=t&&m.push("".concat(h).concat(e!==u?"-".concat(e):"","-").concat(t))}),(0,l.jsx)(a,{ref:t,...c,className:s()(n,o,...m)})});c.displayName="Row",t.Z=c},8533:function(e,t,r){"use strict";var n=r(2187),s=r.n(n),a=r(5271),i=r(4982),l=r(2676);let c=a.forwardRef((e,t)=>{let{bsPrefix:r,className:n,striped:a,bordered:c,borderless:o,hover:d,size:u,variant:h,responsive:m,...p}=e,x=(0,i.vE)(r,"table"),j=s()(n,x,h&&"".concat(x,"-").concat(h),u&&"".concat(x,"-").concat(u),a&&"".concat(x,"-").concat("string"==typeof a?"striped-".concat(a):"striped"),c&&"".concat(x,"-bordered"),o&&"".concat(x,"-borderless"),d&&"".concat(x,"-hover")),v=(0,l.jsx)("table",{...p,className:j,ref:t});if(m){let e="".concat(x,"-responsive");return"string"==typeof m&&(e="".concat(e,"-").concat(m)),(0,l.jsx)("div",{className:e,children:v})}return v});t.Z=c},8166:function(e,t,r){"use strict";r.d(t,{b:function(){return s}});var n=r(4961);class s{static async request_url(e,t,r,s){let a=new URLSearchParams(r);return a.append("lang",localStorage.getItem("language")||"en"),a.append("token",localStorage.getItem("token")||""),fetch("/api/"+(t+=(t.includes("?")?"&":"?")+a.toString()),{method:e,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>(e.success?(n.X.emit("newAlert",{message:e.message,variant:"success"}),s.success&&s.success(e.result)):(n.X.emit("newAlert",{message:e.message,variant:"danger"}),s.failure&&s.failure(e.result)),e.result)).catch(e=>{n.X.emit("newAlert",{message:"API Error",variant:"danger"}),s.error&&s.error(e)})}static async request_body(e,t,r,s){fetch("/api/"+t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({params:r.params||{},lang:localStorage.getItem("language")||"en",token:localStorage.getItem("token")||""})}).then(e=>e.json()).then(e=>{e.success?(n.X.emit("newAlert",{message:e.message,variant:"success"}),s.success&&s.success(e.result)):(n.X.emit("newAlert",{message:e.message,variant:"danger"}),s.failure&&s.failure(e.result))}).catch(e=>{n.X.emit("newAlert",{message:"API Error",variant:"danger"}),s.error&&s.error(e)})}static async Get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.request_url("GET",e,t,r)}static async Post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.request_body("POST",e,t,r)}static async Put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.request_body("PUT",e,t,r)}static async Delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.request_url("DELETE",e,t,r)}static async SWRGet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((r,n)=>{s.Get(e,t,{success:e=>r(e),failure:e=>n(e),error:e=>n(e)})})}static success(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.writableEnded||(e.status(200).json({success:!0,message:t,result:r}),e.end())}static failure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.writableEnded||(e.status(200).json({success:!1,message:t,result:{}}),e.end())}}},805:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var n=r(2676);r(5271);var s=r(3232),a=r(7976),i=r.n(a),l=r(9505),c=r(8166),o=r(4703),d=r(5940),u=r(5837),h=r(631),m=r(8801),p=r(8533),x=r(4074),j=r(1228),v=r(9722),f=r(3698);function g(){let{t:e}=s.default,{data:t,mutate:r}=(0,l.ZP)("user",c.b.SWRGet),{data:a,mutate:g}=(0,l.ZP)(()=>null==t?null:"student?studentIdList="+t.user.map(e=>e.studentId).join(","),c.b.SWRGet),y=()=>{r(),g()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:e("user")+" - "+e("brand")})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:e("user")}),(0,n.jsx)(j.J9,{validationSchema:v.Ry().shape({username:v.Z_().typeError(e("requireString")).required(e("required")).min(4,e("minLen4")).max(16,e("maxLen16")),password:v.Z_().typeError(e("requireString")).required(e("required")).min(8,e("minLen8")).max(64,e("maxLen64")).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{}|;':",.<>\/?]).{8,64}$/,e("requireStrongPassword")),studentId:v.Rx().typeError(e("requireNumber")).required(e("required")).min(1,e("min1")).max(38,e("max38")),permission:v.Rx().typeError(e("requireNumber")).required(e("required")).min(0,e("min0"))}),onSubmit:e=>{c.b.Post("user",{params:e},{success:()=>{y()}})},initialValues:{username:"",password:"",studentId:0,permission:5},children:t=>{let{handleSubmit:r,handleChange:s,handleBlur:a,values:i,touched:l,errors:c}=t;return(0,n.jsx)(o.Z,{noValidate:!0,onSubmit:r,children:(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(u.Z,{children:(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(h.Z.Text,{children:e("username")}),(0,n.jsx)(o.Z.Control,{type:"text",name:"username",value:i.username,onChange:s,onBlur:a,isInvalid:l.username&&null!=c.username}),(0,n.jsx)(o.Z.Control.Feedback,{type:"invalid",children:c.username})]})}),(0,n.jsx)(u.Z,{children:(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(h.Z.Text,{children:e("password")}),(0,n.jsx)(o.Z.Control,{type:"password",name:"password",value:i.password,onChange:s,onBlur:a,isInvalid:l.password&&null!=c.password}),(0,n.jsx)(o.Z.Control.Feedback,{type:"invalid",children:c.password})]})}),(0,n.jsx)(u.Z,{children:(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(h.Z.Text,{children:e("studentId")}),(0,n.jsx)(o.Z.Control,{type:"number",name:"studentId",value:i.studentId,onChange:s,onBlur:a,isInvalid:l.studentId&&null!=c.studentId}),(0,n.jsx)(o.Z.Control.Feedback,{type:"invalid",children:c.studentId})]})}),(0,n.jsx)(u.Z,{children:(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(h.Z.Text,{children:e("permission")}),(0,n.jsx)(o.Z.Control,{type:"number",name:"permission",value:i.permission,onChange:s,onBlur:a,isInvalid:l.permission&&null!=c.permission}),(0,n.jsx)(o.Z.Control.Feedback,{type:"invalid",children:c.permission})]})}),(0,n.jsx)(u.Z,{children:(0,n.jsx)(m.Z,{type:"submit",children:e("create")})})]})})}}),(0,n.jsxs)(p.Z,{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:e("id")}),(0,n.jsx)("th",{children:e("username")}),(0,n.jsx)("th",{children:e("studentId")}),(0,n.jsx)("th",{children:e("studentName")}),(0,n.jsx)("th",{children:e("permission")}),(0,n.jsx)("th",{children:e("lastOnline")}),(0,n.jsx)("th",{children:e("operation")})]})}),(0,n.jsx)("tbody",{children:t&&t.user.map(t=>{var r;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:t.userId}),(0,n.jsx)("td",{children:t.username}),(0,n.jsx)("td",{children:t.studentId}),(0,n.jsx)("td",{children:a?null===(r=a.student.find(e=>e.studentId==t.studentId))||void 0===r?void 0:r.studentName:(0,n.jsx)(x.Z,{className:"ms-2",animation:"wave",children:(0,n.jsx)(x.Z,{as:u.Z,xs:12})})}),(0,n.jsx)("td",{children:t.permission}),(0,n.jsx)("td",{children:new Date(t.lastOnline).toLocaleString()}),(0,n.jsx)("td",{children:(0,n.jsxs)(m.Z,{onClick:()=>{c.b.Delete("user",{userId:t.userId.toString()},{success:()=>{y()}})},variant:"danger",size:"sm",children:[(0,n.jsx)(f.Z,{className:"me-1"}),e("delete")]})})]},t.userId)})})]})]})]})}},3698:function(e,t,r){"use strict";var n=r(5271),s=r(507),a=r.n(s),i=["color","size","title","className"];function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=(0,n.forwardRef)(function(e,t){var r=e.color,s=e.size,a=e.title,c=e.className,o=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,i);return n.createElement("svg",l({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:s,height:s,fill:r,className:["bi","bi-trash",c].filter(Boolean).join(" ")},o),a?n.createElement("title",null,a):null,n.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),n.createElement("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"}))});c.propTypes={color:a().string,size:a().oneOfType([a().string,a().number]),title:a().string,className:a().string},c.defaultProps={color:"currentColor",size:"1em",title:null,className:""},t.Z=c}},function(e){e.O(0,[368,4,888,774,179],function(){return e(e.s=6415)}),_N_E=e.O()}]);