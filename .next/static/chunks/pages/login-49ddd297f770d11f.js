(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{512:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(640)}])},8166:function(e,s,t){"use strict";t.d(s,{b:function(){return r}});var n=t(4961);class r{static async request_url(e,s,t,r){let a=new URLSearchParams(t);return a.append("lang",localStorage.getItem("language")||"en"),fetch("/api/"+(s+=(s.includes("?")?"&":"?")+a.toString()),{method:e,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>(e.success?(n.X.emit("newAlert",{message:e.message,variant:"success"}),r.success&&r.success(e.result)):(n.X.emit("newAlert",{message:e.message,variant:"danger"}),r.failure&&r.failure(e.result)),e.result)).catch(e=>{n.X.emit("newAlert",{message:"API Error",variant:"danger"}),r.error&&r.error(e)})}static async request_body(e,s,t,r){fetch("/api/"+s,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({params:t.params||{},lang:localStorage.getItem("language")||"en"})}).then(e=>e.json()).then(e=>{e.success?(n.X.emit("newAlert",{message:e.message,variant:"success"}),r.success&&r.success(e.result)):(n.X.emit("newAlert",{message:e.message,variant:"danger"}),r.failure&&r.failure(e.result))}).catch(e=>{n.X.emit("newAlert",{message:"API Error",variant:"danger"}),r.error&&r.error(e)})}static async Get(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.request_url("GET",e,s,t)}static async Post(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.request_body("POST",e,s,t)}static async Put(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.request_body("PUT",e,s,t)}static async Delete(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.request_url("DELETE",e,s,t)}static async SWRGet(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((t,n)=>{r.Get(e,s,{success:e=>t(e),failure:e=>n(e),error:e=>n(e)})})}static success(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.writableEnded||(e.status(200).json({success:!0,message:s,result:t}),e.end())}static failure(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.writableEnded||(e.status(200).json({success:!1,message:s,result:{}}),e.end())}}},640:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var n=t(2676),r=t(7976),a=t.n(r),i=t(3232),l=t(1228),u=t(9722),o=t(8166),c=t(4703),d=t(4018),m=t(8801),g=t(4961);function h(){let{t:e}=i.default;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a(),{children:(0,n.jsx)("title",{children:e("login")+" - "+e("brand")})}),(0,n.jsx)("h3",{children:e("login")}),(0,n.jsx)(l.J9,{validationSchema:u.Ry().shape({username:u.Z_().typeError(e("requireString")).required(e("required")).min(4,e("minLen4")).max(16,e("maxLen16")),password:u.Z_().typeError(e("requireString")).required(e("required")).min(8,e("minLen8")).max(64,e("maxLen64")).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{}|;':",.<>\/?]).{8,64}$/,e("requireStrongPassword"))}),onSubmit:s=>{o.b.Get("login",s,{success:s=>{let t=s.userId;o.b.Get("user",{userIdList:t},{success:s=>{let t=s.user[0].studentId;o.b.Get("student",{studentIdList:t},{success:s=>{0===s.student.length&&g.X.emit("newAlert",{message:e("studentNotFound"),variant:"danger"});let t=s.student[0].studentName;localStorage.setItem("studentName",t),location.href="/"}})}})}})},initialValues:{username:"",password:""},children:s=>{let{handleSubmit:t,handleChange:r,handleBlur:a,values:i,touched:l,errors:u}=s;return(0,n.jsxs)(c.Z,{noValidate:!0,onSubmit:t,children:[(0,n.jsxs)(d.Z,{controlId:"username",label:e("username"),className:"mb-3",children:[(0,n.jsx)(c.Z.Control,{type:"text",placeholder:e("username"),name:"username",value:i.username,onBlur:a,onChange:r,isInvalid:l.username&&null!=u.username}),(0,n.jsx)(c.Z.Control.Feedback,{type:"invalid",children:u.username})]}),(0,n.jsxs)(d.Z,{controlId:"password",label:e("password"),className:"mb-3",children:[(0,n.jsx)(c.Z.Control,{type:"password",placeholder:e("password"),name:"password",value:i.password,onBlur:a,onChange:r,isInvalid:l.password&&null!=u.password}),(0,n.jsx)(c.Z.Control.Feedback,{type:"invalid",children:u.password})]}),(0,n.jsx)(m.Z,{type:"submit",children:e("login")})]})}})]})}},7976:function(e,s,t){e.exports=t(6627)}},function(e){e.O(0,[4,888,774,179],function(){return e(e.s=512)}),_N_E=e.O()}]);