"use strict";(()=>{var e={};e.id=735,e.ids=[735],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2021:e=>{e.exports=import("i18next")},7987:e=>{e.exports=import("react-i18next")},8210:e=>{e.exports=import("sequelize")},515:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>d,default:()=>o,routeModule:()=>p});var i=r(808),u=r(7933),n=r(6130),s=r(9551),l=e([s]);s=(l.then?(await l)():l)[0];let o=(0,n.l)(s,"default"),d=(0,n.l)(s,"config"),p=new i.PagesAPIRouteModule({definition:{kind:u.x.PAGES_API,page:"/api/groupMember",pathname:"/api/groupMember",bundlePath:"",filename:""},userland:s});a()}catch(e){a(e)}})},9551:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>d});var i=r(4570),u=r(4229),n=r(5076),s=r(2550),l=r(2901),o=e([i,u,n,s]);async function d(e,t){if("GET"==e.method){if(n.Z.changeLanguage(e.query.lang||"en"),await s.r.checkToken(e.query.token)==null){i.b.failure(t,n.Z.t("unauthorized"));return}let p=e.query.studentIdList,f=e.query.groupIdList;var r=[],a=[];if("string"==typeof p)for(let e of p.split(",")){if(!l.h.isValidNumber(e)){i.b.failure(t,n.Z.t("invalidParameter"));return}r.push(parseInt(e))}if("string"==typeof f)for(let e of f.split(",")){if(!l.h.isValidNumber(e)){i.b.failure(t,n.Z.t("invalidParameter"));return}a.push(parseInt(e))}var o=[],d={};r.length>0&&(d.student=r),a.length>0&&(d.group=a),await u.mt.findAll({where:d}).then(e=>{for(let t of e)o.push({studentId:t.getDataValue("student"),group:[{groupId:t.getDataValue("group"),leader:t.getDataValue("leader")}]})}),i.b.success(t,n.Z.t("groupMemberGetSuccess"),{student:o})}else if("POST"==e.method){let r=e.body;if(n.Z.changeLanguage(r.lang||"en"),await s.r.checkToken(r.token)==null){i.b.failure(t,n.Z.t("unauthorized"));return}let a=r.params.student,l=r.params.group,o=r.params.leader;if("number"!=typeof a||"string"!=typeof l||"number"!=typeof o){i.b.failure(t,n.Z.t("invalidParameter"));return}await u.mt.create({student:a,group:l,leader:o}).then(()=>{i.b.success(t,n.Z.t("groupMemberCreateSuccess"))})}else i.b.failure(t,n.Z.t("invalidMethod"))}[i,u,n,s]=o.then?(await o)():o,a()}catch(e){a(e)}})},2901:(e,t,r)=>{r.d(t,{h:()=>a});class a{static isValidNumber(e,t=!1){let r=parseInt(e);return!isNaN(r)&&(t||r>=0)&&r!=-1/0&&r!=1/0}}}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[829],()=>r(515));module.exports=a})();