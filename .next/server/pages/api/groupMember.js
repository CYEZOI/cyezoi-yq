"use strict";(()=>{var e={};e.id=735,e.ids=[735],e.modules={20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},22021:e=>{e.exports=import("i18next")},57987:e=>{e.exports=import("react-i18next")},58210:e=>{e.exports=import("sequelize")},515:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>d,default:()=>o,routeModule:()=>p});var u=r(90808),i=r(27933),n=r(56130),s=r(99551),l=e([s]);s=(l.then?(await l)():l)[0];let o=(0,n.l)(s,"default"),d=(0,n.l)(s,"config"),p=new u.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/groupMember",pathname:"/api/groupMember",bundlePath:"",filename:""},userland:s});a()}catch(e){a(e)}})},99551:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>d});var u=r(64570),i=r(74229),n=r(45076),s=r(72550),l=r(72901),o=e([u,i,n,s]);async function d(e,t){if("GET"==e.method){if(n.Z.changeLanguage(e.query.lang||"en"),await s.r.checkToken(e.query.token)==null){u.b.failure(t,n.Z.t("unauthorized"));return}let p=e.query.studentIdList,f=e.query.groupIdList;var r=[],a=[];if("string"==typeof p)for(let e of p.split(",")){if(!l.h.isValidNumber(e)){u.b.failure(t,n.Z.t("invalidParameter"));return}r.push(parseInt(e))}if("string"==typeof f)for(let e of f.split(",")){if(!l.h.isValidNumber(e)){u.b.failure(t,n.Z.t("invalidParameter"));return}a.push(parseInt(e))}var o=[],d={};r.length>0&&(d.student=r),a.length>0&&(d.group=a),await i.mt.findAll({where:d}).then(e=>{for(let t of e)o.push({studentId:t.getDataValue("student"),group:[{groupId:t.getDataValue("group"),leader:t.getDataValue("leader")}]})}),u.b.success(t,n.Z.t("groupMemberGetSuccess"),{student:o})}else if("POST"==e.method){let r=e.body;if(n.Z.changeLanguage(r.lang||"en"),await s.r.checkToken(r.token)==null){u.b.failure(t,n.Z.t("unauthorized"));return}let a=r.params.student,l=r.params.group,o=r.params.leader;if("number"!=typeof a||"string"!=typeof l||"number"!=typeof o){u.b.failure(t,n.Z.t("invalidParameter"));return}await i.mt.create({student:a,group:l,leader:o}).then(()=>{u.b.success(t,n.Z.t("groupMemberCreateSuccess"))})}else u.b.failure(t,n.Z.t("invalidMethod"))}[u,i,n,s]=o.then?(await o)():o,a()}catch(e){a(e)}})}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[829],()=>r(515));module.exports=a})();