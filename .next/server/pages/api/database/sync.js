"use strict";(()=>{var e={};e.id=988,e.ids=[988],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2021:e=>{e.exports=import("i18next")},8210:e=>{e.exports=import("sequelize")},6130:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},7719:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>o,default:()=>u,routeModule:()=>y});var r=a(808),l=a(7933),n=a(6130),i=a(3492),p=e([i]);i=(p.then?(await p)():p)[0];let u=(0,n.l)(i,"default"),o=(0,n.l)(i,"config"),y=new r.PagesAPIRouteModule({definition:{kind:l.x.PAGES_API,page:"/api/database/sync",pathname:"/api/database/sync",bundlePath:"",filename:""},userland:i});s()}catch(e){s(e)}})},4570:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{b:()=>i});var r=a(9169),l=a(2021),n=e([l]);l=(n.then?(await n)():n)[0];class i{static async request_url(e,t,a,s){let n=new URLSearchParams(a);return n.append("lang",localStorage.getItem("language")||"en"),n.append("token",localStorage.getItem("token")||""),t+=(t.includes("?")?"&":"?")+n.toString(),fetch("/api/"+t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>(e.success?(s.showSuccess&&r.X.emit("newAlert",{message:e.message,variant:"success"}),s.success&&s.success(e.result)):(s.hideFailure||r.X.emit("newAlert",{message:e.message,variant:"danger"}),s.failure&&s.failure(e.result)),e.result)).catch(e=>{s.hideError||r.X.emit("newAlert",{message:(0,l.t)("networkError"),variant:"danger"}),s.error&&s.error(e)})}static async request_body(e,t,a,s){let n={params:a.params||{},lang:localStorage.getItem("language")||"en",token:localStorage.getItem("token")||""};fetch("/api/"+t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>{e.success?(s.showSuccess&&r.X.emit("newAlert",{message:e.message,variant:"success"}),s.success&&s.success(e.result)):(s.hideFailure||r.X.emit("newAlert",{message:e.message,variant:"danger"}),s.failure&&s.failure(e.result))}).catch(e=>{s.hideError||r.X.emit("newAlert",{message:(0,l.t)("networkError"),variant:"danger"}),s.error&&s.error(e)})}static async Get(e,t={},a={}){return i.request_url("GET",e,t,a)}static async Post(e,t={},a={}){return i.request_body("POST",e,t,a)}static async Put(e,t={},a={}){return i.request_body("PUT",e,t,a)}static async Delete(e,t={},a={}){return i.request_url("DELETE",e,t,a)}static async SWRGet(e,t={}){return new Promise((a,s)=>{i.Get(e,t,{success:e=>a(e),failure:e=>s(e),error:e=>s(e)})})}static success(e,t="",a={}){e.writableEnded||(e.status(200).json({success:!0,message:t,result:a}),e.end())}static failure(e,t=""){e.writableEnded||(e.status(200).json({success:!1,message:t,result:{}}),e.end())}}s()}catch(e){s(e)}})},4229:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{Bw:()=>d,CI:()=>p,Qw:()=>E,VK:()=>T,gk:()=>n,h5:()=>c,io:()=>y,mt:()=>o,sJ:()=>u,yr:()=>i});var r=a(8210),l=e([r]);let n=new(r=(l.then?(await l)():l)[0]).Sequelize({dialect:"sqlite",storage:"db/yq.sqlite"}),i=n.define("finance",{financeId:{type:r.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0},date:{type:r.DataTypes.DATEONLY,allowNull:!1},money:{type:r.DataTypes.INTEGER,allowNull:!1},detail:{type:r.DataTypes.STRING,allowNull:!0}}),p=n.define("student",{studentId:{type:r.DataTypes.INTEGER,primaryKey:!0},studentName:{type:r.DataTypes.STRING,allowNull:!1},gender:{type:r.DataTypes.BOOLEAN,allowNull:!1},psychologicalGender:{type:r.DataTypes.STRING,allowNull:!0}}),u=n.define("group",{groupId:{type:r.DataTypes.INTEGER,primaryKey:!0},groupName:{type:r.DataTypes.STRING,allowNull:!1}}),o=n.define("groupMember",{group:{type:r.DataTypes.INTEGER},student:{type:r.DataTypes.INTEGER},leader:{type:r.DataTypes.BOOLEAN,allowNull:!1}}),y=n.define("role",{roleId:{type:r.DataTypes.INTEGER,primaryKey:!0},roleName:{type:r.DataTypes.STRING,allowNull:!1}}),c=n.define("roleMember",{role:{type:r.DataTypes.INTEGER},student:{type:r.DataTypes.INTEGER}}),d=n.define("privilegeRecord",{privilegeRecordId:{type:r.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0},date:{type:r.DataTypes.DATEONLY,allowNull:!1},student:{type:r.DataTypes.INTEGER,allowNull:!1},io:{type:r.DataTypes.BOOLEAN,allowNull:!1},type:{type:r.DataTypes.STRING,allowNull:!1},value:{type:r.DataTypes.INTEGER,allowNull:!1},reason:{type:r.DataTypes.STRING,allowNull:!0}}),T=n.define("user",{userId:{type:r.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0},username:{type:r.DataTypes.STRING,allowNull:!1,unique:!0},password:{type:r.DataTypes.STRING,allowNull:!1},studentId:{type:r.DataTypes.INTEGER,allowNull:!0},permission:{type:r.DataTypes.INTEGER,allowNull:!1,defaultValue:0},lastOnline:{type:r.DataTypes.DATE,allowNull:!0}}),E=n.define("token",{token:{type:r.DataTypes.STRING,primaryKey:!0},userId:{type:r.DataTypes.INTEGER,allowNull:!1}});s()}catch(e){s(e)}})},3492:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>i});var r=a(4570),l=a(4229),n=e([r,l]);async function i(e,t){await l.gk.sync({alter:!0}),r.b.success(t,"Synced successfully")}[r,l]=n.then?(await n)():n,s()}catch(e){s(e)}})},9169:(e,t,a)=>{a.d(t,{X:()=>r});class s{listen(e,t){this.pipes[e]=t}emit(e,t=null){this.pipes[e]&&this.pipes[e](t)}constructor(){this.pipes={}}}let r=new s},7933:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},808:(e,t,a)=>{e.exports=a(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var a=t(t.s=7719);module.exports=a})();