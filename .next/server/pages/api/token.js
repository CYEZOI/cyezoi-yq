"use strict";(()=>{var e={};e.id=222,e.ids=[222],e.modules={20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},22021:e=>{e.exports=import("i18next")},57987:e=>{e.exports=import("react-i18next")},58210:e=>{e.exports=import("sequelize")},3822:(e,t,i)=>{i.a(e,async(e,s)=>{try{i.r(t),i.d(t,{config:()=>u,default:()=>I,routeModule:()=>E});var a=i(90808),r=i(27933),n=i(56130),o=i(44787),c=e([o]);o=(c.then?(await c)():c)[0];let I=(0,n.l)(o,"default"),u=(0,n.l)(o,"config"),E=new a.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/token",pathname:"/api/token",bundlePath:"",filename:""},userland:o});s()}catch(e){s(e)}})},44787:(e,t,i)=>{i.a(e,async(e,s)=>{try{i.r(t),i.d(t,{default:()=>u});var a=i(64570),r=i(45076),n=i(72550),o=i(88059),c=i(72901),I=e([a,r,n,o]);async function u(e,t){if("DELETE"==e.method){r.Z.changeLanguage(e.query.lang||"en");let i=await n.r.checkToken(e.query.token)||-1,s=e.query.userId;if("string"!=typeof s||!c.h.isValidNumber(s)){a.b.failure(t,r.Z.t("invalidParameter"));return}if(i!==parseInt(s)&&!1==(await o.r.getPermission(i)).checkPermission(o.r.PERMISSION_LOGOUT_OTHER)){a.b.failure(t,r.Z.t("permissionDenied"));return}await n.r.deleteToken(parseInt(s)),a.b.success(t,r.Z.t("logoutSuccess"))}else a.b.failure(t,r.Z.t("invalidMethod"))}[a,r,n,o]=I.then?(await I)():I,s()}catch(e){s(e)}})},88059:(e,t,i)=>{i.a(e,async(e,s)=>{try{i.d(t,{r:()=>n});var a=i(74229),r=e([a]);a=(r.then?(await r)():r)[0];class n{static{this.PERMISSION_LOGIN=0}static{this.PERMISSION_FINANCE_WRITE=1}static{this.PERMISSION_CREATE_USER=2}static{this.PERMISSION_LIST_USER=3}static{this.PERMISSION_UPDATE_OTHER_PASSWORD=4}static{this.PERMISSION_UPDATE_PRIVILEGE=5}static{this.PERMISSION_UPDATE_OTHER_INFO=6}static{this.PERMISSION_UPDATE_STUDENT_BASIC_INFO=7}static{this.PERMISSION_LOGOUT_OTHER=8}static{this.PERMISSION_UPLOAD_IMAGE=9}static{this.PERMISSION_LIST_ALL_IMAGE=10}constructor(e){this.permissionNumber=e}static async getPermission(e){let t=0;return await a.VK.findOne({where:{userId:e}}).then(e=>{e&&(t=e.getDataValue("permission"))}),new n(t)}checkPermission(e){return(this.permissionNumber&1<<e)!=0}addPermission(e){this.permissionNumber|=1<<e}removePermission(e){this.permissionNumber&=~(1<<e)}}s()}catch(e){s(e)}})}};var t=require("../../webpack-api-runtime.js");t.C(e);var i=e=>t(t.s=e),s=t.X(0,[829],()=>i(3822));module.exports=s})();