"use strict";(()=>{var e={};e.id=772,e.ids=[772],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2021:e=>{e.exports=import("i18next")},7987:e=>{e.exports=import("react-i18next")},8210:e=>{e.exports=import("sequelize")},7463:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{config:()=>c,default:()=>o,routeModule:()=>d});var i=t(808),n=t(7933),u=t(6130),s=t(6181),l=e([s]);s=(l.then?(await l)():l)[0];let o=(0,u.l)(s,"default"),c=(0,u.l)(s,"config"),d=new i.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/group",pathname:"/api/group",bundlePath:"",filename:""},userland:s});r()}catch(e){r(e)}})},6181:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>c});var i=t(4570),n=t(4229),u=t(5076),s=t(2550),l=t(2901),o=e([i,n,u,s]);async function c(e,a){if("GET"==e.method){if(u.Z.changeLanguage(e.query.lang||"en"),await s.r.checkToken(e.query.token)==null){i.b.failure(a,u.Z.t("unauthorized"));return}let o=e.query.groupIdList;var t=[];if("string"==typeof o)for(let e of o.split(",")){if(!l.h.isValidNumber(e)){i.b.failure(a,u.Z.t("invalidParameter"));return}t.push(parseInt(e))}var r=[];await n.sJ.findAll({...t.length>0&&{where:{groupId:t}}}).then(e=>{for(let a of e)r.push({groupId:a.getDataValue("groupId"),groupName:a.getDataValue("groupName")})}).catch(e=>{console.error(e.name+"  "+e.message),i.b.failure(a,u.Z.t("databaseError"))}),i.b.success(a,u.Z.t("groupGetSuccess"),{group:r})}else i.b.failure(a,u.Z.t("invalidMethod"))}[i,n,u,s]=o.then?(await o)():o,r()}catch(e){r(e)}})},2550:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{r:()=>u});var i=t(4229),n=e([i]);i=(n.then?(await n)():n)[0];class u{static async checkToken(e){return await i.Qw.findOne({where:{token:e}}).then(async e=>{if(!e)return null;let a=e.getDataValue("userId");return await i.VK.update({lastOnline:new Date},{where:{userId:a}}),a}).catch(()=>null)}}r()}catch(e){r(e)}})},2901:(e,a,t)=>{t.d(a,{h:()=>r});class r{static isValidNumber(e,a=!1){let t=parseInt(e);return!isNaN(t)&&(a||t>=0)&&t!=-1/0&&t!=1/0}}}};var a=require("../../webpack-api-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[840],()=>t(7463));module.exports=r})();