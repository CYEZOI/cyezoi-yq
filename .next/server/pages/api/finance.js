"use strict";(()=>{var e={};e.id=837,e.ids=[837],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2021:e=>{e.exports=import("i18next")},7987:e=>{e.exports=import("react-i18next")},8210:e=>{e.exports=import("sequelize")},6130:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},7979:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>d,default:()=>u,routeModule:()=>c});var n=a(808),o=a(7933),i=a(6130),s=a(7626),l=e([s]);s=(l.then?(await l)():l)[0];let u=(0,i.l)(s,"default"),d=(0,i.l)(s,"config"),c=new n.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/finance",pathname:"/api/finance",bundlePath:"",filename:""},userland:s});r()}catch(e){r(e)}})},4570:(e,t,a)=>{a.d(t,{b:()=>r});class r{static async request_url(e,t,a){let r=new URLSearchParams(a);return""!==r.toString()&&(t+="?"+r.toString()),fetch("/api/"+t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e.result)}static async request_body(e,t,a){return fetch("/api/"+t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({params:a.params||{}})}).then(e=>e.json()).then(e=>e.result)}static async Get(e,t={}){return r.request_url("GET",e,t)}static async Post(e,t={}){return r.request_body("POST",e,t)}static async Put(e,t={}){return r.request_body("PUT",e,t)}static async Delete(e,t={}){return r.request_url("DELETE",e,t)}static success(e,t="",a={}){e.writableEnded||(e.status(200).json({success:!0,message:t,result:a}),e.end())}static failure(e,t=""){e.writableEnded||(e.status(200).json({success:!1,message:t,result:{}}),e.end())}}},4229:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Bw:()=>y,CI:()=>l,h5:()=>p,io:()=>c,mt:()=>d,sJ:()=>u,yr:()=>s});var n=a(8210),o=e([n]);let i=new(n=(o.then?(await o)():o)[0]).Sequelize({dialect:"sqlite",storage:"db/yq.sqlite"}),s=i.define("finance",{financeId:{type:n.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0},money:{type:n.DataTypes.INTEGER,allowNull:!1},detail:{type:n.DataTypes.STRING,allowNull:!0}}),l=i.define("student",{studentId:{type:n.DataTypes.INTEGER,primaryKey:!0},studentName:{type:n.DataTypes.STRING,allowNull:!1},gender:{type:n.DataTypes.BOOLEAN,allowNull:!1}}),u=i.define("group",{groupId:{type:n.DataTypes.INTEGER,primaryKey:!0},groupName:{type:n.DataTypes.STRING,allowNull:!1}}),d=i.define("groupMember",{group:{type:n.DataTypes.INTEGER},student:{type:n.DataTypes.INTEGER},leader:{type:n.DataTypes.BOOLEAN,allowNull:!1}}),c=i.define("role",{roleId:{type:n.DataTypes.INTEGER,primaryKey:!0},roleName:{type:n.DataTypes.STRING,allowNull:!1}}),p=i.define("roleMember",{role:{type:n.DataTypes.INTEGER},student:{type:n.DataTypes.INTEGER}}),y=i.define("privilegeRecord",{privilegeRecordId:{type:n.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0},date:{type:n.DataTypes.STRING,allowNull:!1},student:{type:n.DataTypes.INTEGER,allowNull:!1},io:{type:n.DataTypes.BOOLEAN,allowNull:!1},type:{type:n.DataTypes.STRING,allowNull:!1},value:{type:n.DataTypes.INTEGER,allowNull:!1},reason:{type:n.DataTypes.STRING,allowNull:!0}});i.sync(),r()}catch(e){r(e)}})},5076:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>s});var n=a(2021),o=a(7987),i=e([n,o]);[n,o]=i.then?(await i)():i,n.default.use(o.initReactI18next).init({resources:{en:{translation:{404:"404 Not Found","404Description":"The page you are looking for is not found.",addButton:"Add",amount:"Amount",brand:"CYEZOI-YQ",colon:": ",comma:", ",databaseError:"Database error",delete:"Delete",detail:"Detail",error:"Error",errorDescription:"We are sorry, but an error has occurred. Please try again later. If the problem persists, please contact us. Thank you.",finance:"Finance",footer:"Powered by CYEZOI",gain:"Gain",gender:"Gender",group:"Group",home:"Home",id:"ID",language:"Language",lose:"Lose",max1000:"Maximum 1000",maxLen64:"Maximum length 64",min1000:"Minimum -1000",minLen8:"Minimum length 8",money:"Money",operation:"Operation",privilegeRecord:"Privilege Record",reason:"Reason",required:"Required",requireNumber:"Number required",requireString:"String required",RMB:"RMB",role:"Role",student:"Student",studentName:"Name",studentNumber:"Student Number",time:"Time",welcomeDescription:"Welcome to CYEZOI-YQ, the official website of the YQ class of Cao Yang No.2 Middle School.",male:"Male",female:"Female"}},zh:{translation:{404:"404 未找到","404Description":"您要查找的页面未找到。",addButton:"添加",amount:"金额",brand:"曹杨二中永强创新班",colon:"：",comma:"，",databaseError:"数据库错误",delete:"删除",detail:"详情",error:"错误",errorDescription:"很抱歉，发生了错误。请稍后再试。如果问题仍然存在，请与我们联系。谢谢。",finance:"财务",footer:"由曹杨二中信奥开发组提供技术支持",gain:"获得",gender:"性别",group:"组",home:"首页",id:"编号",language:"语言",lose:"失去",max1000:"最大值 1000",maxLen64:"最大长度 64",min1000:"最小值 -1000",minLen8:"最小长度 8",money:"金额",operation:"操作",privilegeRecord:"陶片放逐",reason:"原因",required:"必填",requireNumber:"需要填写数字",requireString:"需要填写字符串",RMB:"元",role:"角色",student:"学生",studentName:"姓名",studentNumber:"学号",time:"时间",welcomeDescription:"欢迎来到曹杨二中永强创新班的官方网站。",male:"男",female:"女"}}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});let s=n.default;r()}catch(e){r(e)}})},7626:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>l});var n=a(4570),o=a(4229),i=a(5076),s=e([o,i]);async function l(e,t){if("GET"==e.method)await o.yr.findAll().then(e=>{n.b.success(t,"",{records:e})}).catch(e=>{console.error(e),n.b.failure(t,i.Z.t("databaseError"))});else if("POST"==e.method){let a=e.body;await o.yr.create({money:a.params.money,detail:a.params.detail}).then(()=>{n.b.success(t)}).catch(e=>{console.error(e),n.b.failure(t,i.Z.t("databaseError"))})}else if("DELETE"==e.method){let a=new URLSearchParams(new URL(e.url,"http://localhost").search);await o.yr.destroy({where:{financeId:a.get("financeId")}}).then(()=>{n.b.success(t)}).catch(e=>{console.error(e),n.b.failure(t,i.Z.t("databaseError"))})}else if("PUT"==e.method){let a=e.body;await o.yr.update({money:a.params.money,detail:a.params.detail},{where:{financeId:a.params.financeId}}).then(()=>{n.b.success(t)}).catch(e=>{console.error(e),n.b.failure(t,i.Z.t("databaseError"))})}else n.b.failure(t,"Invalid method")}[o,i]=s.then?(await s)():s,r()}catch(e){r(e)}})},7933:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},808:(e,t,a)=>{e.exports=a(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=7979);module.exports=a})();