"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/profile";
exports.ids = ["pages/api/profile"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sequelize":
/*!****************************!*\
  !*** external "sequelize" ***!
  \****************************/
/***/ ((module) => {

module.exports = import("sequelize");;

/***/ }),

/***/ "(api)/./node_modules/.pnpm/next@14.2.21_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprofile&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fprofile.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.21_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprofile&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fprofile.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/.pnpm/next@14.2.21_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/.pnpm/next@14.2.21_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/.pnpm/next@14.2.21_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_profile_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/profile.ts */ \"(api)/./src/pages/api/profile.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_profile_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_profile_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_profile_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_profile_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/profile\",\n        pathname: \"/api/profile\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_profile_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjIxX3JlYWN0LWRvbUAxOC4zLjFfcmVhY3RAMTguMy4xX19yZWFjdEAxOC4zLjEvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1yb3V0ZS1sb2FkZXIvaW5kZXguanM/a2luZD1QQUdFU19BUEkmcGFnZT0lMkZhcGklMkZwcm9maWxlJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZwcm9maWxlLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3VEO0FBQ3ZEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxzREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsc0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3llem9pLXlxLz9hMDIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL3Byb2ZpbGUudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9maWxlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvZmlsZVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/.pnpm/next@14.2.21_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprofile&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fprofile.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/database.ts":
/*!*************************!*\
  !*** ./src/database.ts ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   imageModule: () => (/* binding */ imageModule),\n/* harmony export */   privilegeRecordModule: () => (/* binding */ privilegeRecordModule),\n/* harmony export */   roleMemberModule: () => (/* binding */ roleMemberModule),\n/* harmony export */   roleModule: () => (/* binding */ roleModule),\n/* harmony export */   sequelize: () => (/* binding */ sequelize),\n/* harmony export */   studentModule: () => (/* binding */ studentModule),\n/* harmony export */   tokenModule: () => (/* binding */ tokenModule),\n/* harmony export */   userModule: () => (/* binding */ userModule)\n/* harmony export */ });\n/* harmony import */ var sequelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sequelize */ \"sequelize\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([sequelize__WEBPACK_IMPORTED_MODULE_0__]);\nsequelize__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst sequelize = new sequelize__WEBPACK_IMPORTED_MODULE_0__.Sequelize({\n    dialect: \"sqlite\",\n    storage: \"db/yq.sqlite\"\n});\nconst studentModule = sequelize.define(\"student\", {\n    studentId: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.INTEGER,\n        primaryKey: true\n    },\n    studentName: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: false\n    },\n    gender: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.BOOLEAN,\n        allowNull: false\n    },\n    psychologicalGender: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true\n    }\n});\nconst roleModule = sequelize.define(\"role\", {\n    roleId: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.INTEGER,\n        primaryKey: true\n    },\n    roleName: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: false\n    }\n});\nconst roleMemberModule = sequelize.define(\"roleMember\", {\n    role: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.INTEGER\n    },\n    student: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.INTEGER\n    }\n});\nconst privilegeRecordModule = sequelize.define(\"privilegeRecord\", {\n    privilegeRecordId: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.INTEGER,\n        primaryKey: true,\n        autoIncrement: true\n    },\n    date: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.DATEONLY,\n        allowNull: false\n    },\n    student: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.INTEGER,\n        allowNull: false\n    },\n    io: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.BOOLEAN,\n        allowNull: false\n    },\n    type: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: false\n    },\n    value: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.INTEGER,\n        allowNull: false\n    },\n    reason: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true\n    }\n});\nconst userModule = sequelize.define(\"user\", {\n    userId: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.INTEGER,\n        primaryKey: true,\n        autoIncrement: true\n    },\n    username: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: false,\n        unique: true\n    },\n    password: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: false\n    },\n    studentId: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.INTEGER,\n        allowNull: true\n    },\n    permission: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.INTEGER,\n        allowNull: false,\n        defaultValue: 0\n    },\n    lastOnline: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.DATE,\n        allowNull: true\n    }\n});\nconst tokenModule = sequelize.define(\"token\", {\n    token: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        primaryKey: true\n    },\n    userId: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.INTEGER,\n        allowNull: false\n    }\n});\nconst imageModule = sequelize.define(\"image\", {\n    imageId: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        primaryKey: true\n    },\n    userId: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.INTEGER,\n        allowNull: false\n    },\n    image: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: false\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0RBQVNBLENBQUNTLE9BQU87UUFDdkJJLFdBQVc7SUFDZjtBQUNKLEdBQ0Y7QUFFSyxNQUFNNkIsY0FBY3hDLFVBQVVJLE1BQU0sQ0FDdkMsU0FDQTtJQUNJcUMsU0FBUztRQUNMbkMsTUFBTVIsZ0RBQVNBLENBQUNZLE1BQU07UUFDdEJGLFlBQVk7SUFDaEI7SUFDQXNCLFFBQVE7UUFDSnhCLE1BQU1SLGdEQUFTQSxDQUFDUyxPQUFPO1FBQ3ZCSSxXQUFXO0lBQ2Y7SUFDQStCLE9BQU87UUFDSHBDLE1BQU1SLGdEQUFTQSxDQUFDWSxNQUFNO1FBQ3RCQyxXQUFXO0lBQ2Y7QUFDSixHQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3llem9pLXlxLy4vc3JjL2RhdGFiYXNlLnRzPzIwYzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGF0YVR5cGVzLCBTZXF1ZWxpemUgfSBmcm9tIFwic2VxdWVsaXplXCJcblxuZXhwb3J0IGNvbnN0IHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoe1xuICAgIGRpYWxlY3Q6IFwic3FsaXRlXCIsXG4gICAgc3RvcmFnZTogXCJkYi95cS5zcWxpdGVcIixcbn0pXG5cbmV4cG9ydCBjb25zdCBzdHVkZW50TW9kdWxlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcInN0dWRlbnRcIixcbiAgICB7XG4gICAgICAgIHN0dWRlbnRJZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBzdHVkZW50TmFtZToge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIGdlbmRlcjoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLkJPT0xFQU4sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICBwc3ljaG9sb2dpY2FsR2VuZGVyOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9XG4gICAgfSxcbik7XG5cbmV4cG9ydCBjb25zdCByb2xlTW9kdWxlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcInJvbGVcIixcbiAgICB7XG4gICAgICAgIHJvbGVJZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICByb2xlTmFtZToge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSxcbik7XG5cbmV4cG9ydCBjb25zdCByb2xlTWVtYmVyTW9kdWxlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcInJvbGVNZW1iZXJcIixcbiAgICB7XG4gICAgICAgIHJvbGU6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICB9LFxuICAgICAgICBzdHVkZW50OiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgfSxcbiAgICB9LFxuKTtcblxuZXhwb3J0IGNvbnN0IHByaXZpbGVnZVJlY29yZE1vZHVsZSA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJwcml2aWxlZ2VSZWNvcmRcIixcbiAgICB7XG4gICAgICAgIHByaXZpbGVnZVJlY29yZElkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBkYXRlOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURU9OTFksXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICBzdHVkZW50OiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIGlvOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuQk9PTEVBTixcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICByZWFzb246IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSxcbik7XG5cbmV4cG9ydCBjb25zdCB1c2VyTW9kdWxlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcInVzZXJcIixcbiAgICB7XG4gICAgICAgIHVzZXJJZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgdXNlcm5hbWU6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBwYXNzd29yZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIHN0dWRlbnRJZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIHBlcm1pc3Npb246IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMCxcbiAgICAgICAgfSxcbiAgICAgICAgbGFzdE9ubGluZToge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSxcbik7XG5cbmV4cG9ydCBjb25zdCB0b2tlbk1vZHVsZSA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJ0b2tlblwiLFxuICAgIHtcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB1c2VySWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9LFxuKTtcblxuZXhwb3J0IGNvbnN0IGltYWdlTW9kdWxlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcImltYWdlXCIsXG4gICAge1xuICAgICAgICBpbWFnZUlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgdXNlcklkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9LFxuKTsiXSwibmFtZXMiOlsiRGF0YVR5cGVzIiwiU2VxdWVsaXplIiwic2VxdWVsaXplIiwiZGlhbGVjdCIsInN0b3JhZ2UiLCJzdHVkZW50TW9kdWxlIiwiZGVmaW5lIiwic3R1ZGVudElkIiwidHlwZSIsIklOVEVHRVIiLCJwcmltYXJ5S2V5Iiwic3R1ZGVudE5hbWUiLCJTVFJJTkciLCJhbGxvd051bGwiLCJnZW5kZXIiLCJCT09MRUFOIiwicHN5Y2hvbG9naWNhbEdlbmRlciIsInJvbGVNb2R1bGUiLCJyb2xlSWQiLCJyb2xlTmFtZSIsInJvbGVNZW1iZXJNb2R1bGUiLCJyb2xlIiwic3R1ZGVudCIsInByaXZpbGVnZVJlY29yZE1vZHVsZSIsInByaXZpbGVnZVJlY29yZElkIiwiYXV0b0luY3JlbWVudCIsImRhdGUiLCJEQVRFT05MWSIsImlvIiwidmFsdWUiLCJyZWFzb24iLCJ1c2VyTW9kdWxlIiwidXNlcklkIiwidXNlcm5hbWUiLCJ1bmlxdWUiLCJwYXNzd29yZCIsInBlcm1pc3Npb24iLCJkZWZhdWx0VmFsdWUiLCJsYXN0T25saW5lIiwiREFURSIsInRva2VuTW9kdWxlIiwidG9rZW4iLCJpbWFnZU1vZHVsZSIsImltYWdlSWQiLCJpbWFnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/database.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/profile.ts":
/*!**********************************!*\
  !*** ./src/pages/api/profile.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../database */ \"(api)/./src/database.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_database__WEBPACK_IMPORTED_MODULE_0__]);\n_database__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// 直接实现 token 验证函数，避免导入问题\nasync function checkToken(tokenValue) {\n    if (!tokenValue) {\n        return null;\n    }\n    try {\n        // 从数据库查询 token\n        const query = `\n      SELECT t.*, u.studentId, u.username \n      FROM token t \n      JOIN user u ON t.studentId = u.studentId \n      WHERE t.token = ? AND t.isValid = 1\n    `;\n        const result = await _database__WEBPACK_IMPORTED_MODULE_0__.db.all(query, [\n            tokenValue\n        ]);\n        if (result.length === 0) {\n            return null;\n        }\n        return {\n            studentId: result[0].studentId,\n            username: result[0].username\n        };\n    } catch (error) {\n        console.error(\"Token validation error:\", error);\n        return null;\n    }\n}\nasync function handler(req, res) {\n    try {\n        const { method } = req;\n        let tokenValue;\n        let targetUserId;\n        if (method === \"GET\") {\n            tokenValue = req.query.token;\n            targetUserId = req.query.userId;\n        } else if (method === \"POST\") {\n            tokenValue = req.body.token;\n        } else {\n            return res.status(405).json({\n                success: false,\n                message: \"Method not allowed\"\n            });\n        }\n        // 验证 token\n        if (!tokenValue) {\n            return res.status(401).json({\n                success: false,\n                message: \"Token is required\"\n            });\n        }\n        const currentUser = await checkToken(tokenValue);\n        if (!currentUser) {\n            return res.status(401).json({\n                success: false,\n                message: \"Invalid token\"\n            });\n        }\n        if (method === \"GET\") {\n            try {\n                // 确定要获取的用户ID（如果没有指定则为当前用户）\n                const userId = targetUserId || currentUser.studentId;\n                console.log(`获取用户资料: userId=${userId}, currentUser=${currentUser.studentId}`);\n                // 从数据库获取用户信息\n                const userQuery = `\n          SELECT studentId, username, description \n          FROM user \n          WHERE studentId = ?\n        `;\n                const userResult = await _database__WEBPACK_IMPORTED_MODULE_0__.db.all(userQuery, [\n                    userId\n                ]);\n                if (userResult.length === 0) {\n                    return res.status(404).json({\n                        success: false,\n                        message: \"User not found\"\n                    });\n                }\n                const userData = userResult[0];\n                const profileData = {\n                    userId: userData.studentId.toString(),\n                    username: userData.username,\n                    description: userData.description || \"# 个人简介\\n\\n暂无个人简介\",\n                    content: userData.description || \"# 个人简介\\n\\n暂无个人简介\",\n                    currentUserId: currentUser.studentId.toString()\n                };\n                console.log(\"返回的用户资料:\", profileData);\n                return res.status(200).json({\n                    success: true,\n                    data: profileData\n                });\n            } catch (dbError) {\n                console.error(\"Database error:\", dbError);\n                return res.status(500).json({\n                    success: false,\n                    message: \"Database error\"\n                });\n            }\n        } else if (method === \"POST\") {\n            try {\n                // 更新用户资料（只能更新自己的资料）\n                const { description } = req.body;\n                if (typeof description !== \"string\") {\n                    return res.status(400).json({\n                        success: false,\n                        message: \"Description must be a string\"\n                    });\n                }\n                console.log(`用户 ${currentUser.studentId} 尝试更新个人简介:`, description);\n                // 更新数据库中的用户描述\n                const updateQuery = `\n          UPDATE user \n          SET description = ? \n          WHERE studentId = ?\n        `;\n                const updateResult = await _database__WEBPACK_IMPORTED_MODULE_0__.db.run(updateQuery, [\n                    description,\n                    currentUser.studentId\n                ]);\n                if (updateResult.changes === 0) {\n                    return res.status(404).json({\n                        success: false,\n                        message: \"User not found or no changes made\"\n                    });\n                }\n                // 获取更新后的用户数据\n                const userQuery = `\n          SELECT studentId, username, description \n          FROM user \n          WHERE studentId = ?\n        `;\n                const userResult = await _database__WEBPACK_IMPORTED_MODULE_0__.db.all(userQuery, [\n                    currentUser.studentId\n                ]);\n                if (userResult.length === 0) {\n                    return res.status(404).json({\n                        success: false,\n                        message: \"User not found after update\"\n                    });\n                }\n                const userData = userResult[0];\n                console.log(`用户 ${userData.username}(${userData.studentId}) 成功更新了个人简介`);\n                return res.status(200).json({\n                    success: true,\n                    message: \"保存成功\",\n                    data: {\n                        userId: userData.studentId.toString(),\n                        username: userData.username,\n                        description: userData.description,\n                        content: userData.description\n                    }\n                });\n            } catch (dbError) {\n                console.error(\"Database update error:\", dbError);\n                return res.status(500).json({\n                    success: false,\n                    message: \"Failed to update profile\"\n                });\n            }\n        }\n    } catch (error) {\n        console.error(\"Profile API error:\", error);\n        return res.status(500).json({\n            success: false,\n            message: \"Internal server error\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UztvQkFDWDtnQkFDRjtnQkFFQSxNQUFNSyxXQUFXRCxVQUFVLENBQUMsRUFBRTtnQkFFOUJoQixRQUFRYyxHQUFHLENBQ1QsQ0FBQyxHQUFHLEVBQUVHLFNBQVNuQixRQUFRLENBQUMsQ0FBQyxFQUFFbUIsU0FBU3BCLFNBQVMsQ0FBQyxXQUFXLENBQUM7Z0JBRzVELE9BQU9NLElBQUlNLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQzFCQyxTQUFTO29CQUNUQyxTQUFTO29CQUNUVyxNQUFNO3dCQUNKaEIsUUFBUVUsU0FBU3BCLFNBQVMsQ0FBQ3NCLFFBQVE7d0JBQ25DckIsVUFBVW1CLFNBQVNuQixRQUFRO3dCQUMzQnNCLGFBQWFILFNBQVNHLFdBQVc7d0JBQ2pDQyxTQUFTSixTQUFTRyxXQUFXO29CQUMvQjtnQkFDRjtZQUNGLEVBQUUsT0FBT0ksU0FBUztnQkFDaEJ4QixRQUFRRCxLQUFLLENBQUMsMEJBQTBCeUI7Z0JBQ3hDLE9BQU9yQixJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUMxQkMsU0FBUztvQkFDVEMsU0FBUztnQkFDWDtZQUNGO1FBQ0Y7SUFDRixFQUFFLE9BQU9iLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHNCQUFzQkE7UUFDcEMsT0FBT0ksSUFBSU0sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUQyxTQUFTO1FBQ1g7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3llem9pLXlxLy4vc3JjL3BhZ2VzL2FwaS9wcm9maWxlLnRzP2Y3OWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQgeyBkYiB9IGZyb20gXCIuLi8uLi9kYXRhYmFzZVwiO1xuXG5pbnRlcmZhY2UgQVBJUmVzcG9uc2Uge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBtZXNzYWdlPzogc3RyaW5nO1xuICBkYXRhPzogYW55O1xufVxuXG4vLyDnm7TmjqXlrp7njrAgdG9rZW4g6aqM6K+B5Ye95pWw77yM6YG/5YWN5a+85YWl6Zeu6aKYXG5hc3luYyBmdW5jdGlvbiBjaGVja1Rva2VuKHRva2VuVmFsdWU6IHN0cmluZykge1xuICBpZiAoIXRva2VuVmFsdWUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8g5LuO5pWw5o2u5bqT5p+l6K+iIHRva2VuXG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICBTRUxFQ1QgdC4qLCB1LnN0dWRlbnRJZCwgdS51c2VybmFtZSBcbiAgICAgIEZST00gdG9rZW4gdCBcbiAgICAgIEpPSU4gdXNlciB1IE9OIHQuc3R1ZGVudElkID0gdS5zdHVkZW50SWQgXG4gICAgICBXSEVSRSB0LnRva2VuID0gPyBBTkQgdC5pc1ZhbGlkID0gMVxuICAgIGA7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuYWxsKHF1ZXJ5LCBbdG9rZW5WYWx1ZV0pO1xuXG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdHVkZW50SWQ6IHJlc3VsdFswXS5zdHVkZW50SWQsXG4gICAgICB1c2VybmFtZTogcmVzdWx0WzBdLnVzZXJuYW1lLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlRva2VuIHZhbGlkYXRpb24gZXJyb3I6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZTxBUElSZXNwb25zZT5cbikge1xuICB0cnkge1xuICAgIGNvbnN0IHsgbWV0aG9kIH0gPSByZXE7XG4gICAgbGV0IHRva2VuVmFsdWU6IHN0cmluZztcbiAgICBsZXQgdGFyZ2V0VXNlcklkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgICBpZiAobWV0aG9kID09PSBcIkdFVFwiKSB7XG4gICAgICB0b2tlblZhbHVlID0gcmVxLnF1ZXJ5LnRva2VuIGFzIHN0cmluZztcbiAgICAgIHRhcmdldFVzZXJJZCA9IHJlcS5xdWVyeS51c2VySWQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSBcIlBPU1RcIikge1xuICAgICAgdG9rZW5WYWx1ZSA9IHJlcS5ib2R5LnRva2VuIGFzIHN0cmluZztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IFwiTWV0aG9kIG5vdCBhbGxvd2VkXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyDpqozor4EgdG9rZW5cbiAgICBpZiAoIXRva2VuVmFsdWUpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBcIlRva2VuIGlzIHJlcXVpcmVkXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGNoZWNrVG9rZW4odG9rZW5WYWx1ZSk7XG4gICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCB0b2tlblwiLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKG1ldGhvZCA9PT0gXCJHRVRcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8g56Gu5a6a6KaB6I635Y+W55qE55So5oi3SUTvvIjlpoLmnpzmsqHmnInmjIflrprliJnkuLrlvZPliY3nlKjmiLfvvIlcbiAgICAgICAgY29uc3QgdXNlcklkID0gdGFyZ2V0VXNlcklkIHx8IGN1cnJlbnRVc2VyLnN0dWRlbnRJZDtcblxuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBg6I635Y+W55So5oi36LWE5paZOiB1c2VySWQ9JHt1c2VySWR9LCBjdXJyZW50VXNlcj0ke2N1cnJlbnRVc2VyLnN0dWRlbnRJZH1gXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8g5LuO5pWw5o2u5bqT6I635Y+W55So5oi35L+h5oGvXG4gICAgICAgIGNvbnN0IHVzZXJRdWVyeSA9IGBcbiAgICAgICAgICBTRUxFQ1Qgc3R1ZGVudElkLCB1c2VybmFtZSwgZGVzY3JpcHRpb24gXG4gICAgICAgICAgRlJPTSB1c2VyIFxuICAgICAgICAgIFdIRVJFIHN0dWRlbnRJZCA9ID9cbiAgICAgICAgYDtcbiAgICAgICAgY29uc3QgdXNlclJlc3VsdCA9IGF3YWl0IGRiLmFsbCh1c2VyUXVlcnksIFt1c2VySWRdKTtcblxuICAgICAgICBpZiAodXNlclJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kXCIsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJSZXN1bHRbMF07XG5cbiAgICAgICAgY29uc3QgcHJvZmlsZURhdGEgPSB7XG4gICAgICAgICAgdXNlcklkOiB1c2VyRGF0YS5zdHVkZW50SWQudG9TdHJpbmcoKSxcbiAgICAgICAgICB1c2VybmFtZTogdXNlckRhdGEudXNlcm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHVzZXJEYXRhLmRlc2NyaXB0aW9uIHx8IFwiIyDkuKrkurrnroDku4tcXG5cXG7mmoLml6DkuKrkurrnroDku4tcIixcbiAgICAgICAgICBjb250ZW50OiB1c2VyRGF0YS5kZXNjcmlwdGlvbiB8fCBcIiMg5Liq5Lq6566A5LuLXFxuXFxu5pqC5peg5Liq5Lq6566A5LuLXCIsXG4gICAgICAgICAgY3VycmVudFVzZXJJZDogY3VycmVudFVzZXIuc3R1ZGVudElkLnRvU3RyaW5nKCksIC8vIOi/lOWbnuW9k+WJjeeUqOaIt0lE55So5LqO5p2D6ZmQ5Yik5patXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc29sZS5sb2coXCLov5Tlm57nmoTnlKjmiLfotYTmlpk6XCIsIHByb2ZpbGVEYXRhKTtcblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogcHJvZmlsZURhdGEsXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZGJFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3I6XCIsIGRiRXJyb3IpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiRGF0YWJhc2UgZXJyb3JcIixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChtZXRob2QgPT09IFwiUE9TVFwiKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyDmm7TmlrDnlKjmiLfotYTmlpnvvIjlj6rog73mm7TmlrDoh6rlt7HnmoTotYTmlpnvvIlcbiAgICAgICAgY29uc3QgeyBkZXNjcmlwdGlvbiB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBkZXNjcmlwdGlvbiAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiRGVzY3JpcHRpb24gbXVzdCBiZSBhIHN0cmluZ1wiLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYOeUqOaItyAke2N1cnJlbnRVc2VyLnN0dWRlbnRJZH0g5bCd6K+V5pu05paw5Liq5Lq6566A5LuLOmAsXG4gICAgICAgICAgZGVzY3JpcHRpb25cbiAgICAgICAgKTtcblxuICAgICAgICAvLyDmm7TmlrDmlbDmja7lupPkuK3nmoTnlKjmiLfmj4/ov7BcbiAgICAgICAgY29uc3QgdXBkYXRlUXVlcnkgPSBgXG4gICAgICAgICAgVVBEQVRFIHVzZXIgXG4gICAgICAgICAgU0VUIGRlc2NyaXB0aW9uID0gPyBcbiAgICAgICAgICBXSEVSRSBzdHVkZW50SWQgPSA/XG4gICAgICAgIGA7XG5cbiAgICAgICAgY29uc3QgdXBkYXRlUmVzdWx0ID0gYXdhaXQgZGIucnVuKHVwZGF0ZVF1ZXJ5LCBbXG4gICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgY3VycmVudFVzZXIuc3R1ZGVudElkLFxuICAgICAgICBdKTtcblxuICAgICAgICBpZiAodXBkYXRlUmVzdWx0LmNoYW5nZXMgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kIG9yIG5vIGNoYW5nZXMgbWFkZVwiLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6I635Y+W5pu05paw5ZCO55qE55So5oi35pWw5o2uXG4gICAgICAgIGNvbnN0IHVzZXJRdWVyeSA9IGBcbiAgICAgICAgICBTRUxFQ1Qgc3R1ZGVudElkLCB1c2VybmFtZSwgZGVzY3JpcHRpb24gXG4gICAgICAgICAgRlJPTSB1c2VyIFxuICAgICAgICAgIFdIRVJFIHN0dWRlbnRJZCA9ID9cbiAgICAgICAgYDtcbiAgICAgICAgY29uc3QgdXNlclJlc3VsdCA9IGF3YWl0IGRiLmFsbCh1c2VyUXVlcnksIFtjdXJyZW50VXNlci5zdHVkZW50SWRdKTtcblxuICAgICAgICBpZiAodXNlclJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kIGFmdGVyIHVwZGF0ZVwiLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSB1c2VyUmVzdWx0WzBdO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGDnlKjmiLcgJHt1c2VyRGF0YS51c2VybmFtZX0oJHt1c2VyRGF0YS5zdHVkZW50SWR9KSDmiJDlip/mm7TmlrDkuobkuKrkurrnroDku4tgXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IFwi5L+d5a2Y5oiQ5YqfXCIsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdXNlcklkOiB1c2VyRGF0YS5zdHVkZW50SWQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyRGF0YS51c2VybmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB1c2VyRGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHVzZXJEYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZGJFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgdXBkYXRlIGVycm9yOlwiLCBkYkVycm9yKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGRhdGUgcHJvZmlsZVwiLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlByb2ZpbGUgQVBJIGVycm9yOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImRiIiwiY2hlY2tUb2tlbiIsInRva2VuVmFsdWUiLCJxdWVyeSIsInJlc3VsdCIsImFsbCIsImxlbmd0aCIsInN0dWRlbnRJZCIsInVzZXJuYW1lIiwiZXJyb3IiLCJjb25zb2xlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInRhcmdldFVzZXJJZCIsInRva2VuIiwidXNlcklkIiwiYm9keSIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsImN1cnJlbnRVc2VyIiwibG9nIiwidXNlclF1ZXJ5IiwidXNlclJlc3VsdCIsInVzZXJEYXRhIiwicHJvZmlsZURhdGEiLCJ0b1N0cmluZyIsImRlc2NyaXB0aW9uIiwiY29udGVudCIsImN1cnJlbnRVc2VySWQiLCJkYXRhIiwiZGJFcnJvciIsInVwZGF0ZVF1ZXJ5IiwidXBkYXRlUmVzdWx0IiwicnVuIiwiY2hhbmdlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/profile.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.21_react-dom@18.3.1_react@18.3.1__react@18.3.1"], () => (__webpack_exec__("(api)/./node_modules/.pnpm/next@14.2.21_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprofile&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fprofile.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();