"use strict";(()=>{var e={};e.id=857,e.ids=[857],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2021:e=>{e.exports=import("i18next")},7987:e=>{e.exports=import("react-i18next")},8210:e=>{e.exports=import("sequelize")},4994:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>c,default:()=>d,routeModule:()=>o});var n=a(808),i=a(7933),s=a(6130),u=a(3279),l=e([u]);u=(l.then?(await l)():l)[0];let d=(0,s.l)(u,"default"),c=(0,s.l)(u,"config"),o=new n.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/student",pathname:"/api/student",bundlePath:"",filename:""},userland:u});r()}catch(e){r(e)}})},3279:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>c});var n=a(4570),i=a(4229),s=a(5076),u=a(2550),l=a(2901),d=e([n,i,s,u]);async function c(e,t){if("GET"==e.method){if(s.Z.changeLanguage(e.query.lang||"en"),await u.r.checkToken(e.query.token)==null){n.b.failure(t,s.Z.t("unauthorized"));return}let d=e.query.studentIdList;var a=[];if("string"==typeof d)for(let e of d.split(",")){if(!l.h.isValidNumber(e)){n.b.failure(t,s.Z.t("invalidParameter"));return}a.push(parseInt(e))}var r=[];await i.CI.findAll({...a.length>0&&{where:{studentId:a}}}).then(e=>{for(let t of e)r.push({studentId:t.getDataValue("studentId"),studentName:t.getDataValue("studentName"),gender:t.getDataValue("gender")})}).catch(e=>{console.error(e.name+"  "+e.message),n.b.failure(t,s.Z.t("databaseError"))}),n.b.success(t,s.Z.t("studentGetSuccess"),{student:r})}else n.b.failure(t,s.Z.t("invalidMethod"))}[n,i,s,u]=d.then?(await d)():d,r()}catch(e){r(e)}})},2550:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{r:()=>s});var n=a(4229),i=e([n]);n=(i.then?(await i)():i)[0];class s{static async checkToken(e){return await n.Qw.findOne({where:{token:e}}).then(async e=>{if(!e)return null;let t=e.getDataValue("userId");return await n.VK.update({lastOnline:new Date},{where:{userId:t}}),t}).catch(()=>null)}}r()}catch(e){r(e)}})},2901:(e,t,a)=>{a.d(t,{h:()=>r});class r{static isValidNumber(e,t=!1){let a=parseInt(e);return!isNaN(a)&&(t||a>=0)&&a!=-1/0&&a!=1/0}}}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[840],()=>a(4994));module.exports=r})();